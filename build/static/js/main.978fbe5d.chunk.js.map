{"version":3,"sources":["services/logService.js","services/httpService.js","services/movieService.js","services/genreService.js","components/like.jsx","components/tableBody.jsx","components/tableHeader.jsx","components/table.jsx","services/authService.js","components/moviesTable.jsx","components/pagination.jsx","utils/paginate.js","components/filtering.jsx","services/userService.js","components/Movies.jsx","components/customers.jsx","components/rentals.jsx","components/notfound.jsx","components/navbar.jsx","components/input.jsx","components/form.jsx","components/Selector.jsx","components/movieform.jsx","components/loginForm.jsx","components/registerForm.jsx","components/logout.jsx","components/protectedRoute.jsx","App.js","reportWebVitals.js","index.js"],"names":["init","log","error","console","axios","defaults","baseURL","process","interceptors","response","use","status","logger","toast","Promise","reject","get","post","put","delete","setJwt","jwt","headers","common","movieUrl","movieIdUrl","movieId","deleteMovie","e","id","target","value","http","getMovie","ex","saveMovie","data","addMovie","getGenres","Like","state","classes","this","props","liked","className","aria-hidden","style","cursor","onClick","Component","TableBody","renderCell","item","column","content","path","to","_id","_","createKey","key","columns","map","TableHeader","raiseSort","sort","order","onSort","renderSortIcon","scope","label","Table","sortColumn","apiEndpoint","tokenKey","login","user","a","localStorage","setItem","loginWithJwt","getCurrentUser","getItem","jwtDecode","MovieTable","movie","onLike","isAdmin","onDelete","movies","Pagination","itemsCount","pageSize","currentPage","onPageChange","pagesCount","Math","ceil","pages","range","aria-label","p","href","paginate","items","pageNumber","startIndex","slice","take","Filtering","onGenreChange","currentFilter","textProperty","valueProperty","g","name","register","getUserData","updateUser","Movies","search","moviesByGenre","genres","count","handleDelete","originalMovies","originalMoviesByGenre","filter","m","setState","handleLike","Userliked","find","i","index","indexOf","splice","push","handlePageChange","page","handleGenreChange","genre","handleSort","handleChange","currentTarget","getPageData","allMovies","reg","RegExp","movs","searched","title","match","orderBy","length","count2","forEach","handleLink","type","placeholder","onChange","Customers","Rentals","NotFound","NavBar","data-toggle","data-target","aria-controls","aria-expanded","Fragment","Input","rest","htmlFor","Form","errors","validateProperty","obj","schema","Joi","validate","details","message","abortEarly","handleSubmit","preventDefault","doSubmit","input","errorMessage","disabled","Selector","required","d","selected","MovieForm","numberInStock","dailyRentalRate","selectedGenre","string","number","handleGenreSet","params","genreId","history","onSubmit","renderInput","renderButton","LoginForm","email","password","location","window","from","pathname","RegisterForm","min","Logout","removeItem","protectedRoute","component","render","App","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById"],"mappings":"gSAee,OACXA,KAbJ,aAcIC,IAPJ,SAAaC,GAETC,QAAQD,MAAMA,KCPlBE,IAAMC,SAASC,QAAUC,sDAKzBH,IAAMI,aAAaC,SAASC,IAAI,MAAM,SAAAR,GAWpC,OAVwBA,EAAMO,UAAYP,EAAMO,SAASE,QAAU,KAAOT,EAAMO,SAASE,OAAS,MAI5FC,EAAOX,IAAIC,GACbW,QAAMX,MAAM,iCAKTY,QAAQC,OAAOb,MAQP,OACXc,IAAKZ,IAAMY,IACXC,KAAMb,IAAMa,KACZC,IAAKd,IAAMc,IACXC,OAAQf,IAAMe,OACdC,OATL,SAAgBC,GACbjB,IAAMC,SAASiB,QAAQC,OAAO,gBAAiBF,ICvB7CG,EAAQ,UAEd,SAASC,EAAWC,GAChB,MAAM,GAAN,OAAUF,EAAV,YAAsBE,GAOnB,SAASC,EAAYC,GACxB,IAAMC,EAAKD,EAAEE,OAAOC,MACpB,OAAOC,EAAKb,OAAOM,EAAWI,IAG3B,SAASI,EAASJ,GACrB,IACI,OAAOG,EAAKhB,IAAIS,EAAWI,IAE/B,MAAMK,GACF,MAAO,aAMR,SAASC,EAAUN,EAAGO,GACzB,IACI,OAAOJ,EAAKd,IAAIO,EAAWI,GAAIO,GAEnC,MAAMF,GACF,MAAO,aAGR,SAASG,EAASD,GACrB,IAEI,OADAjC,QAAQF,IAAImC,GACLJ,EAAKf,KAAKO,EAAV,eAAwBY,IAEnC,MAAMF,GACF,MAAO,aCxCR,SAASI,IACf,OAAQN,EAAKhB,IAAL,W,WCQMuB,E,4MAVXC,MAAQ,G,4CACR,WACI,IAAIC,EAAU,cAEd,OADIC,KAAKC,MAAMC,QAAMH,GAAS,MAE7B,mBAAGI,UAAWJ,EAASK,cAAY,OAAOC,MAAO,CAACC,OAAO,WAAYC,QAASP,KAAKC,MAAMM,c,GAN/EC,a,wBC8BJC,E,4MA1BXC,WAAa,SAACC,EAAMC,GAChB,OAAGA,EAAOC,QAAgBD,EAAOC,QAAQF,GACtB,UAAhBC,EAAOE,KAA0B,cAAC,IAAD,CAAMC,GAAE,kBAAaJ,EAAKK,KAA1B,SAAkCC,IAAE3C,IAAIqC,EAAKC,EAAOE,QAEjFG,IAAE3C,IAAIqC,EAAKC,EAAOE,O,EAE7BhB,MAAQ,G,EAERoB,UAAU,SAACP,EAAKC,GACZ,OAAOD,EAAKK,KAAOJ,EAAOE,MAAQF,EAAOO,M,4CAG7C,WAAU,IAAD,SACmBnB,KAAKC,MAAtBP,EADF,EACEA,KAAM0B,EADR,EACQA,QACb,OAAS,gCACJ1B,EAAK2B,KAAI,SAAAV,GAAI,OAAE,6BACXS,EAAQC,KAAI,SAAAT,GAAM,OAAE,6BAAuC,EAAKF,WAAWC,EAAKC,IAAnD,EAAKM,UAAUP,EAAKC,QAD7BD,EAAKK,c,GAhBlBR,aC4BTc,E,4MA7BXC,UAAY,SAAAT,GACR,IAAMU,EAAI,eAAO,EAAKvB,MAAMuB,MACzBA,EAAKV,OAASA,EAChBU,EAAKC,MAAuB,QAAfD,EAAKC,MAAiB,OAAO,OAEtCD,EAAKV,KAAOA,EACZU,EAAKC,MAAQ,OAEjB,EAAKxB,MAAMyB,OAAOF,I,EAGvBG,eAAgB,SAACf,GAAU,IAChBY,EAAQ,EAAKvB,MAAbuB,KACP,OAAGZ,EAAOE,OAAS,EAAKb,MAAMuB,KAAKV,KAAa,KAC9B,QAAfU,EAAKC,MAAwB,mBAAGtB,UAAU,mBACtC,mBAAGA,UAAU,qB,4CAGxB,WAAU,IAAD,OACL,OACI,gCACI,6BACKH,KAAKC,MAAMmB,QAAQC,KAAI,SAAAT,GAAM,OAAI,qBAAIT,UAAU,YAA4CyB,MAAM,MAAMrB,QAAS,kBAAI,EAAKgB,UAAUX,EAAOE,OAAzG,UAAiHF,EAAOiB,MAAxH,IAAgI,EAAKF,eAAef,KAArHA,EAAOE,MAAQF,EAAOO,gB,GAvBjFX,aCgBXsB,E,4JAXX,WAAU,IAAD,EACoC9B,KAAKC,MAAvCP,EADF,EACEA,KAAKgC,EADP,EACOA,OAAON,EADd,EACcA,QAAQW,EADtB,EACsBA,WAC3B,OACI,wBAAO5B,UAAU,YAAjB,UACA,cAAC,EAAD,CAAaiB,QAASA,EAASI,KAAMO,EAAYL,OAAQA,IACzD,cAAC,EAAD,CAAWhC,KAAMA,EAAM0B,QAASA,W,GAPxBZ,a,iBCCdwB,EAAe,QACfC,EAAW,QAIV,SAAeC,EAAtB,kC,4CAAO,WAAqBC,GAArB,iBAAAC,EAAA,sEACuB9C,EAAKf,KAAKyD,EAAaG,GAD9C,gBACSxD,EADT,EACGe,KACR2C,aAAaC,QAAQL,EAAUtD,GAF1B,4C,sBAOA,SAAS4D,EAAa5D,GAC3B0D,aAAaC,QAAQL,EAAUtD,GAQ1B,SAAS6D,IACd,IACE,IAAM7D,EAAM0D,aAAaI,QAAQR,GACjC,OAAOS,IAAU/D,GACjB,MAAOa,GACP,OAAO,MAvBXF,EAAKZ,OAaM2D,aAAaI,QAAQR,I,ICejBU,E,4MA/BXvB,QAAS,CACL,CAACN,KAAK,QAASe,MAAM,SACrB,CAACf,KAAK,aAAce,MAAM,SAC1B,CAACf,KAAK,gBAAiBe,MAAM,SAC7B,CAACf,KAAK,kBAAmBe,MAAM,QAC/B,CAAEV,IAAI,OAAQN,QAAQ,SAAA+B,GAAK,OAAE,cAAC,EAAD,CAAM1C,MAAO0C,EAAM1C,MAAOK,QAAS,WAAK,EAAKN,MAAM4C,OAAOD,S,4CAM3F,WAAU,IAAD,OACAxB,EAAWpB,KAAXoB,QAEFoB,KAAoBA,IAAiBM,UACtC1B,EAAO,sBAAOA,GAAP,CAAe,CAACD,IAAI,SAAUN,QAAQ,SAAA+B,GAAK,OAAE,wBAAQvD,MAAOuD,EAAM5B,IAAKb,UAAU,iBAAiBI,QAAS,EAAKN,MAAM8C,SAAzE,yBAJjD,MASmB/C,KAAKC,MAAtB+C,EATF,EASEA,OAAOtB,EATT,EASSA,OAGd,OACG,cAAC,EAAD,CAAOhC,KAAMsD,EAAQ5B,QAASA,EAASM,OAAQA,EAAQK,WAAY/B,KAAKC,MAAM8B,iB,GAzBhEvB,aC+BVyC,E,4MA/BbnD,MAAQ,G,4CACR,WAAU,IAAD,EACoDE,KAAKC,MAAxDiD,EADD,EACCA,WAAYC,EADb,EACaA,SAASC,EADtB,EACsBA,YAAaC,EADnC,EACmCA,aACpCC,EAAaC,KAAKC,KAAKN,EAAaC,GAC1C,GAAmB,IAAfG,EAAkB,OAAO,KAC7B,IAAMG,EAAQxC,IAAEyC,MAAM,EAAGJ,EAAa,GACtC,OACE,qBAAKK,aAAW,kBAAhB,SACE,oBAAIxD,UAAU,iBAAd,SACGsD,EAAMpC,KAAI,SAACuC,GAAD,OACT,oBAAYzD,UAAWyD,IAAMR,EAAa,mBAAmB,YAA7D,SACE,mBAAGS,KAAK,KAAI1D,UAAU,YAAWI,QAAS,WAAO8C,EAAaO,IAA9D,SACGA,KAFIA,c,GAXIpD,aCDlB,SAASsD,EAASC,EAAMC,EAAWb,GACtC,IAAMc,GAAcD,EAAW,GAAIb,EACnC,OAAOlC,IAAE8C,GAAOG,MAAMD,GAAYE,KAAKhB,GAAU9D,Q,ICetC+E,E,4MAhBXtE,MAAQ,G,4CACR,WAAU,IAAD,EACkEE,KAAKC,MAArEoE,EADF,EACEA,cAAcC,EADhB,EACgBA,cAAcP,EAD9B,EAC8BA,MAAMQ,EADpC,EACoCA,aAAaC,EADjD,EACiDA,cAEtD,OACI,sBAAKrE,UAAU,cAAf,UAEQ,mBAAI0D,KAAK,KAAK1D,UAA6B,cAAlBmE,EAAgC,gDAAgD,yCAA0C/D,QAAS,kBAAI8D,EAAc,cAA9K,wBACCN,EAAM1C,KAAI,SAAAoD,GAAI,OAAM,mBAAGZ,KAAK,KAA4B1D,UAAWsE,EAAEF,KAAkBD,EAAc,gDAAgD,yCAA0C/D,QAAS,kBAAI8D,EAAcI,EAAEC,OAAxM,SAAgND,EAAEC,MAAhMD,EAAED,c,GATrChE,aCClBwB,EAAc,SAEb,SAAS2C,EAASxC,GACjB,OAAO7C,EAAKf,KAAKyD,EAAYG,GAI9B,SAAeyC,IAAtB,+B,4CAAO,sBAAAxC,EAAA,+EACS9C,EAAKhB,IAAI0D,cADlB,4C,sBAIA,SAAe6C,EAAtB,mC,8CAAO,WAA0B1C,GAA1B,SAAAC,EAAA,6DACYD,EAAKnB,IADjB,SAEO1B,EAAKd,IAAIwD,YAAmBG,GAFnC,4C,0BCHc2C,G,4MACjBhF,MAAQ,CACJiF,OAAO,GACP/B,OAAO,GACPgC,cAAc,GACdC,OAAO,GACP9B,SAAS,EACTC,YAAa,EACbkB,cAAc,YACd9C,KAAK,CAACV,KAAK,QAAQW,MAAM,OACzByD,MAAM,GACN/C,KAAK,I,EAwBTgD,a,uCAAgB,WAAMjG,GAAN,qBAAAkD,EAAA,6DACNgD,EAAiB,EAAKtF,MAAMkD,OAC5BqC,EAAwB,EAAKvF,MAAMkF,cAEnChC,EAAS,EAAKlD,MAAMkD,OAAOsC,QAAO,SAAAC,GAAC,OAAEA,EAAEvE,MAAQ9B,EAAEE,OAAOC,SACxD2F,EAAgB,EAAKlF,MAAMkF,cAAcM,QAAO,SAAAC,GAAC,OAAEA,EAAEvE,MAAQ9B,EAAEE,OAAOC,SAC5E,EAAKmG,SAAS,CAACxC,SAAQgC,kBANX,kBAUD/F,EAAYC,GAVX,yDAaD,KAAGnB,UAAmC,MAAvB,KAAGA,SAASE,SAC3BE,QAAMX,MAAM,uCACX,EAAKgI,SAAS,CAACxC,OAAOoC,EAAeJ,cAAcK,KAEpD,KAAGtH,UAAmC,MAAvB,KAAGA,SAASE,SAC1BE,QAAMX,MAAM,KAAGO,SAAS2B,MACvB,EAAK8F,SAAS,CAACxC,OAAOoC,EAAeJ,cAAcK,KAEpD,KAAGtH,UAAmC,MAAvB,KAAGA,SAASE,SAC3BE,QAAMX,MAAM,gCACX,EAAKgI,SAAS,CAACxC,OAAOoC,EAAeJ,cAAcK,KAvBpD,0D,wDA+BhBI,W,uCAAW,WAAO7C,GAAP,uBAAAR,EAAA,sEAIAD,EAAQ,EAAKrC,MAAbqC,KAKHuD,EAAYvD,EAAKjC,MAEXwF,EAAUC,MAAK,SAAAC,GAAC,OAAEA,IAAMhD,EAAM5B,SAElCd,GAAQ,GAbP,YAuBoB,EAAKJ,MAAMkD,QAChCA,EAxBC,YAwBY,EAAKlD,MAAMkD,QACxB6C,EAAQ7C,EAAO8C,QAAQlD,GAC7BI,EAAO6C,GAAO3F,OAASA,EACvB,EAAKsF,SAAS,CAACxC,WAEf9C,EAAMiC,EAAKjC,MAAM6F,OAAO5D,EAAKjC,MAAM4F,QAAQlD,EAAM5B,IAAI,IAAImB,EAAKjC,MAAM8F,KAAKpD,EAAM5B,KAC3E,EAAKwE,SAAS,CAACrD,SA9BZ,UAgCG0C,EAAW1C,GAhCd,8I,wDA+CX8D,iBAAiB,SAACC,GAEhB,EAAKV,SAAS,CAACpC,YAAY8C,K,EAG7BC,kBAAmB,SAACC,GAEhB,GADA,EAAKZ,SAAS,CAAClB,cAAc8B,EAAMhD,YAAY,IAClC,cAAVgD,EAAuB,OAAO,EAAKZ,SAAS,CAACxC,OAAO,EAAKlD,MAAMkF,gBAClE,IAAIA,EAAa,YAAO,EAAKlF,MAAMkF,eACnCA,EAAgBA,EAAcM,QAAO,SAAAC,GAAC,OAAEA,EAAEa,MAAM1B,OAAS0B,KACzD,EAAKZ,SAAS,CACVxC,OAAOgC,K,EAIfqB,WAAa,SAAC7E,GAEV,EAAKgE,SAAS,CAAChE,U,EAInB8E,aAAe,YAA0B,IAEjCvB,EAAS,GACbA,EAASA,GAH2B,EAAvBwB,cAGYlH,MACzB,EAAKmG,SAAS,CAACT,SAAO3B,YAAY,K,EAItCoD,YAAc,WAAM,IAAD,EAEiC,EAAK1G,MAA9CqD,EAFQ,EAERA,SAASC,EAFD,EAECA,YAAmBqD,EAFpB,EAEazD,OACtB0D,EAAM,IAAIC,OAAO,EAAK7G,MAAMiF,OAAO,KACnC6B,EAAI,YAAOH,GACXI,EAAWJ,EAAUnB,QAAO,SAAAC,GAAI,OAAOA,EAAEuB,MAAMC,MAAML,MAE3D,MAAQ,CAAC1D,OAAOc,EADD7C,IAAE+F,QAAQH,EAAS,CAAC,EAAK/G,MAAM0B,KAAKV,MAAM,CAAC,EAAKhB,MAAM0B,KAAKC,QAC1C2B,EAAYD,GAAU+B,MAAM2B,EAASI,OAAOC,OAAON,I,8FAvIzF,6CAAAxE,EAAA,sEACgCxC,IADhC,uBACgBqF,EADhB,EACWvF,KADX,SZhBOJ,EAAKhB,IAAIQ,GYgBhB,uBAGgBkE,EAHhB,EAGWtD,KAHX,mBAKoCkF,IALpC,iBAKsBzC,EALtB,EAKiBzC,KACXM,KAAKwF,SAAS,CAACrD,SACCA,EAATjC,MACDiH,SAAQ,SAAAvB,GACV5C,EAAO2C,MAAK,SAAAJ,GAAI,GAAGA,EAAEvE,MAAO4E,EAAG,OAAOL,EAAErF,OAAQ,KAC/C,EAAKsF,SAAS,CAACxC,SAAOgC,cAAchC,EAAOiC,cAVtD,kDAaUjF,KAAKwF,SAAS,CAACxC,SAAOgC,cAAchC,EAAOiC,WAbrD,QAgBMjF,KAAKwF,SAAS,CAACxC,SAAOgC,cAAchC,EAAOiC,WAhBjD,0D,0EA0IE,WAAS,IAGE9C,EAAQnC,KAAKC,MAAbkC,KAHH,EAK0BnC,KAAKwG,cAA5BxD,EALH,EAKGA,OAAOkC,EALV,EAKUA,MAKf,OAVK,EAKgBgC,OAKXD,OAAO,EAIb,sBAAK9G,UAAU,MAAf,UACC,qBAAKA,UAAU,QAAf,SACK,cAAC,EAAD,CAAWkE,cAAerE,KAAKmG,kBAAmB7B,cAAetE,KAAKF,MAAMwE,cAAgBP,MAAO/D,KAAKF,MAAMmF,OAAQV,aAAa,OAAOC,cAAc,UAE7J,sBAAKrE,UAAU,MAAf,UACKgC,GAAQ,cAAC,IAAD,CAASpB,GAAG,cAAZ,SAA0B,wBAAQZ,UAAU,sBAAsBI,QAASP,KAAKoH,WAAtD,yBACnC,uBAAOC,KAAK,OAAOlH,UAAU,mBAAmBmH,YAAY,YAAYjI,MAAOW,KAAKF,MAAMiF,OAAQwC,SAAUvH,KAAKsG,eACjH,oBAAGnG,UAAU,MAAb,qBAA4B6C,EAAOiE,OAAnC,IAA4CjE,EAAOiE,OAAQ,EAAE,SAAS,QAAtE,WAAuFjH,KAAKF,MAAMkD,OAAOiE,UACxG,cAAC,EAAD,CAAcjE,OAAQA,EAAQD,SAAU/C,KAAKmF,aAActC,OAAQ7C,KAAKyF,WAAY/D,OAAQ1B,KAAKqG,WAAYtE,WAAY/B,KAAKF,MAAM0B,OACrI,cAAC,EAAD,CAAY0B,WAAYgC,EAAO/B,SAAUnD,KAAKF,MAAMqD,SAAUE,aAAcrD,KAAKiG,iBAAkB7C,YAAapD,KAAKF,MAAMsD,oBAQ3H,sBAAKjD,UAAU,MAAf,UACI,qBAAKA,UAAU,QAAf,SACJ,cAAC,EAAD,CAAWkE,cAAerE,KAAKmG,kBAAmB7B,cAAetE,KAAKF,MAAMwE,cAAgBP,MAAO/D,KAAKF,MAAMmF,OAAQV,aAAa,OAAOC,cAAc,UAExJ,sBAAKrE,UAAU,MAAf,UACA,qBAAKA,UAAU,SAAf,SAAwB,8CAA8C,cAA7BH,KAAKF,MAAMwE,cAA8BtE,KAAKF,MAAMwE,cAAc,GAAnF,+BACxB,cAAC,IAAD,CAASvD,GAAG,cAAZ,SAA0B,wBAAQZ,UAAU,kBAAkBI,QAASP,KAAKoH,WAAlD,mC,GA7LN5G,aCVrB,SAASgH,KACpB,OACI,8BACQ,6CCHD,SAASC,KACpB,OACI,8BACI,2CCHX,IAOcC,GAPG,WACd,OACI,8BACI,uDC6BGC,GA9BA,SAAC,GAAW,IAAVxF,EAAS,EAATA,KACb,OACI,sBAAKhC,UAAU,iDAAf,UACN,cAAC,IAAD,CAASA,UAAU,eAAeY,GAAG,GAArC,mBACA,wBAAQZ,UAAU,iBAAiBkH,KAAK,SAASO,cAAY,WAAWC,cAAY,aAAaC,gBAAc,YAAYC,gBAAc,QAAQpE,aAAW,oBAA5J,SACE,sBAAMxD,UAAU,0BAElB,qBAAKA,UAAU,2BAA2BhB,GAAG,YAA7C,SACE,qBAAIgB,UAAU,aAAd,UACI,cAAC,IAAD,CAASA,UAAU,WAAWY,GAAG,UAAjC,oBACA,cAAC,IAAD,CAASZ,UAAU,WAAWY,GAAG,aAAjC,uBACA,cAAC,IAAD,CAASZ,UAAU,WAAWY,GAAG,WAAjC,sBACCoB,GACF,eAAC,IAAM6F,SAAP,WACA,cAAC,IAAD,CAAS7H,UAAU,WAAWY,GAAG,SAAjC,mBACC,cAAC,IAAD,CAASZ,UAAU,WAAWY,GAAG,YAAjC,yBAPJ,IASDoB,GACI,eAAC,IAAM6F,SAAP,WACA,cAAC,IAAD,CAAS7H,UAAU,WAAWY,GAAG,WAAjC,SAA6CoB,EAAKuC,OACjD,cAAC,IAAD,CAASvE,UAAU,WAAWY,GAAG,UAAjC,gC,+CCtBO,SAASkH,GAAT,GAA+C,IAA9BvD,EAA6B,EAA7BA,KAAM7C,EAAuB,EAAvBA,MAAMrE,EAAiB,EAAjBA,MAAS0K,EAAQ,yCAC3D,OACE,sBAAK/H,UAAU,MAAf,UACE,uBAAOgI,QAASzD,EAAhB,SAAuB7C,IACvB,iDACMqG,GADN,IAEExD,KAAMA,EACNvF,GAAIuF,EACJvE,UAAU,mBAEX3C,GAAS,qBAAK2C,UAAU,qBAAf,SAAqC3C,O,ICuDtC4K,G,4MA9DXtI,MAAQ,CACJJ,KAAK,GACL2I,OAAO,I,EAIVC,iBAAkB,YAAiB,IAAf5D,EAAc,EAAdA,KAAKrF,EAAS,EAATA,MAChBkJ,EAAI,gBAAE7D,EAAMrF,GACZmJ,EAAM,gBAAK9D,EAAM,EAAK8D,OAAO9D,IAC5BlH,EAASiL,KAAIC,SAASH,EAAKC,GAA3BhL,MACP,OAAOA,EAAOA,EAAMmL,QAAQ,GAAGC,QAAQ,M,EAK3CF,SAAW,WACP,IACMlL,EAAUiL,KAAIC,SAAS,EAAK5I,MAAMJ,KAAM,EAAK8I,OADnC,CAACK,YAAW,IACtBrL,MAEP,IAAIA,EAAO,OAAO,KAEjB,IANa,EAMP6K,EAAS,GANF,eAOG7K,EAAMmL,SAPT,IAOb,IAAI,EAAJ,0BAAQhI,EAAR,QACA0H,EAAO1H,EAAKG,KAAK,IAAMH,EAAKiI,SARf,8BASb,OAAOP,G,EAKXS,aAAe,SAAA5J,GACXA,EAAE6J,iBAEF,IAAMV,EAAS,EAAKK,WAEpB,GADA,EAAKlD,SAAS,CAAC6C,OAAOA,GAAQ,KAC3BA,EAAQ,OAAO5K,QAAQF,IAAI8K,GAE7B,EAAKW,Y,EAKV1C,aAAe,YAA2B,IAAX2C,EAAU,EAAxB1C,cACP8B,EAAM,eAAO,EAAKvI,MAAMuI,QACxBa,EAAe,EAAKZ,iBAAiBW,GACxCC,EAAcb,EAAOY,EAAMvE,MAAQwE,SAC1Bb,EAAOY,EAAMvE,MAEzB,IAAMhF,EAAI,eAAO,EAAKI,MAAMJ,MAC5BA,EAAKuJ,EAAMvE,MAAQuE,EAAM5J,MACzB,EAAKmG,SAAS,CAAC9F,OAAK2I,Y,kDAExB,SAAaxG,GACV,OAAQ,wBAAQsH,SAAUnJ,KAAK0I,WAAYvI,UAAU,sBAA7C,SAAoE0B,M,yBAG/E,SAAY6C,EAAK7C,GAAsB,IAAhBwF,EAAe,uDAAR,OAAQ,EACXrH,KAAKF,MAArBJ,EAD2B,EAC3BA,KAAK2I,EADsB,EACtBA,OACZ,OAAO,cAACJ,GAAD,CAAOvD,KAAMA,EAAM2C,KAAMA,EAAMhI,MAAOK,EAAKgF,GAAO7C,MAAOA,EAAO0F,SAAUvH,KAAKsG,aAAc9I,MAAO6K,EAAO3D,S,GA1DvGlE,aCcJ4I,G,4JAfb,WAAU,IAAD,OACP,OACE,8BACE,sBAAKjJ,UAAU,iBAAf,UACI,uBAAOgI,QAAQ,SAAf,oBACF,yBAASzD,KAAK,SAAQvE,UAAU,gBAAgBkJ,UAAQ,EAAC9B,SAAUvH,KAAKC,MAAMsH,SAA9E,UACE,wBAAQlI,MAAM,GAAd,mCACCW,KAAKC,MAAMP,KAAK2B,KAAI,SAAAiI,GAAC,OAAE,wBAAoBjK,MAAOiK,EAAE5E,KAAM6E,SAAU,EAAKtJ,MAAMsJ,WAAaD,EAAE5E,KAAvE,SAAyF4E,EAAE5E,MAA9E4E,EAAEtI,oB,GAR5BR,aCyFRgJ,G,4MAjFX1J,MAAQ,CACHJ,KAAK,CAACoH,MAAM,GAAGV,MAAM,GAAGqD,cAAc,GAAGC,gBAAgB,GAAGzE,OAAO,IACnEoD,OAAO,GACPsB,cAAc,I,EAEfnB,OAAS,CACL1B,MAAO2B,KAAImB,SAASP,WAAWxH,MAAM,SACrC4H,cAAehB,KAAIoB,SAASR,WAAWxH,MAAM,SAC7C6H,gBAAiBjB,KAAIoB,SAASR,WAAWxH,MAAM,QAC/CoD,OAAOwD,KAAIY,Y,EA2BfS,eAAiB,SAAC5K,GAChB,EAAKsG,SAAS,CAACmE,cAAczK,EAAEE,OAAOC,S,EAIxC2J,S,sBAAW,0CAAA5G,EAAA,yDACDpB,EAAM,EAAKf,MAAM8G,MAAMgD,OAAO5K,GAD7B,EAI8C,EAAKW,MAAMJ,KAAzDoH,EAJA,EAIAA,MAAM4C,EAJN,EAIMA,gBAAgBzE,EAJtB,EAIsBA,OAAOwE,EAJ7B,EAI6BA,cAC9BrD,EAAQnB,EAAOU,MAAK,SAAAlB,GAAC,OAAEA,EAAEC,OAAS,EAAK5E,MAAM6J,iBAC7C/G,EAAQ,CAACkE,QAAM4C,kBAAgBM,QAAQ5D,EAAMpF,IAAIyI,iBAC5C,QAARzI,EAPI,wBAQHvD,QAAQF,IAAIqF,GART,SASIjD,EAASiD,GATb,gDAYGnD,EAAUuB,EAAI4B,GAZjB,QAgBP,EAAK3C,MAAMgK,QAAQjE,KAAK,WAhBjB,4C,8FA7BX,8CAAA5D,EAAA,yDACsC,QAA/BpC,KAAKC,MAAM8G,MAAMgD,OAAO5K,GAD/B,0CAIuCI,EAASS,KAAKC,MAAM8G,MAAMgD,OAAO5K,IAJxE,uBAIwByD,EAJxB,EAImBlD,KAJnB,SAKwCE,IALxC,gBAKwBqF,EALxB,EAKmBvF,KACAoH,EAA6ClE,EAA7CkE,MAAM2C,EAAuC7G,EAAvC6G,cAAcC,EAAyB9G,EAAzB8G,gBAAgBtD,EAASxD,EAATwD,MAC3CpG,KAAKwF,SAAS,CAAC9F,KAAK,CAACoH,QAAM2C,gBAAcC,kBAAgBzE,UAAQ0E,cAAcvD,EAAM1B,OACrFjH,QAAQF,IAAIqF,GARxB,kDAWe,KAAG7E,UAAmC,MAAvB,KAAGA,SAASE,SAC1BE,QAAMX,MAAM,mBACbwC,KAAKC,MAAMgK,QAAQjE,KAAK,eAbvC,iDAkBgCpG,IAlBhC,iBAkBgBqF,EAlBhB,EAkBWvF,KACNM,KAAKwF,SAAS,CAAC9F,KAAK,CAACoH,MAAM,GAAG2C,cAAc,GAAGC,gBAAgB,GAAGzE,OAAOA,KAnB9E,0D,0EAiDJ,WAAU,IACKA,EAAUjF,KAAKF,MAAMJ,KAArBuF,OAEP,OACI,gCACI,oBAAI9E,UAAU,MAAd,wBACA,uBAAM+J,SAAUlK,KAAK8I,aAArB,UACC9I,KAAKmK,YAAY,QAAQ,SACzBnK,KAAKmK,YAAY,gBAAgB,SAClC,cAAC,GAAD,CAAUzK,KAAMuF,EAAQsE,SAAUvJ,KAAKF,MAAM6J,cAAepC,SAAUvH,KAAK8J,iBAC1E9J,KAAKmK,YAAY,kBAAkB,QACnCnK,KAAKoK,aAAa,kB,GAzEfhC,ICwCTiC,G,4MA1CbvK,MAAQ,CACNJ,KAAM,CAAE4K,MAAO,GAAIC,SAAU,IAC7BlC,OAAQ,I,EAEVG,OAAS,CACP8B,MAAO7B,KAAImB,SAASP,WAAWxH,MAAM,YAAYyI,QACjDC,SAAU9B,KAAImB,SAASP,WAAWxH,MAAM,a,EAE1CmH,S,sBAAW,8BAAA5G,EAAA,+EAEDF,EAAM,EAAKpC,MAAMJ,MAFhB,OAGPjC,QAAQF,IAAI,EAAK0C,MAAMuK,UACf1K,EAAU,EAAKG,MAAMuK,SAArB1K,MAER2K,OAAOD,SAAW1K,EAAQA,EAAM4K,KAAKC,SAAW,IANzC,gDAQH,KAAG5M,UAAmC,MAAvB,KAAGA,SAASE,UACvBoK,EADuC,eACzB,EAAKvI,MAAMuI,SACxBiC,MAAQ,KAAGvM,SAAS2B,KAC3B,EAAK8F,SAAS,CAAE6C,YAXX,yD,4CAgBX,WACE,OAAG7F,IAAyB,cAAC,IAAD,CAAUzB,GAAG,MAKvC,gCACE,oBAAIZ,UAAU,MAAd,mBACA,uBAAM+J,SAAUlK,KAAK8I,aAArB,UACG9I,KAAKmK,YAAY,QAAS,QAAS,SACnCnK,KAAKmK,YAAY,WAAY,WAAY,YACzCnK,KAAKoK,aAAa,mB,GApCLhC,IC+CTwC,G,4MA5CX9K,MAAQ,CACJJ,KAAK,CAAC4K,MAAM,GAAGC,SAAS,GAAG7F,KAAK,IAChC2D,OAAO,I,EAEXG,OAAS,CACL8B,MAAO7B,KAAImB,SAASP,WAAWxH,MAAM,SAASyI,QAC9CC,SAAU9B,KAAImB,SAASP,WAAWxH,MAAM,YAAYgJ,IAAI,GACxDnG,KAAM+D,KAAImB,SAASP,WAAWxH,MAAM,S,EAGxCmH,S,sBAAW,4BAAA5G,EAAA,+EAGiBuC,EAAS,EAAK7E,MAAMJ,MAHrC,OAIN6C,EAJM,OAIgB3D,QAAQ,iBAC9B6L,OAAOD,SAAW,IALZ,gDAQJ,KAAGzM,UAAmC,MAAvB,KAAGA,SAASE,UACpBoK,EADmC,eACtB,EAAKvI,MAAMuI,SACvBiC,MAAQ,KAAGvM,SAAS2B,KAC3B,EAAK8F,SAAS,CAAC6C,YAXZ,yD,4CAkBX,WACI,OAAG7F,IAAyB,cAAC,IAAD,CAAUzB,GAAG,MAErC,gCACA,oBAAIZ,UAAU,MAAd,sBACA,uBAAM+J,SAAUlK,KAAK8I,aAArB,UACC9I,KAAKmK,YAAY,QAAQ,QAAQ,SACjCnK,KAAKmK,YAAY,WAAW,WAAW,YACvCnK,KAAKmK,YAAY,OAAO,OAAO,QAC/BnK,KAAKoK,aAAa,sB,GAtCJhC,ICSZ0C,G,uKAZX,WjBWFzI,aAAa0I,WAAW9I,GiBTlBwI,OAAOD,SAAW,M,oBAKtB,WACI,OAAO,S,GAVMhK,aCaNwK,GAZQ,SAAC,GAAoD,EAAlDlK,KAAmD,IAAlCN,EAAiC,EAA5CyK,UAAsBC,EAAsB,EAAtBA,OAAWhD,EAAW,8CAC1E,OACE,cAAC,IAAD,2BACMA,GADN,IAEEgD,OAAQ,SAACjL,GACP,OAAKuC,IACEhC,EAAY,cAACA,EAAD,eAAeP,IAAYiL,EAAO,eAAIjL,IAD3B,cAAC,IAAD,CAAUc,GAAI,CAAC4J,SAAS,SAAS7K,MAAM,CAAE4K,KAAKzK,EAAMuK,kBCiD3EW,I,wNApCbrL,MAAM,G,uDAIN,WACE,IAAMqC,EAAOK,IACbxC,KAAKwF,SAAS,CAACrD,W,oBAMnB,WAAS,IAAD,OACN,OACE,gCACE,cAAC,iBAAD,IACF,cAAC,GAAD,CAAQA,KAAMnC,KAAKF,MAAMqC,OACzB,sBAAMhC,UAAU,YAAhB,SACE,eAAC,IAAD,WACA,cAAC,IAAD,CAAOW,KAAK,YAAYmK,UAAWL,KACnC,cAAC,IAAD,CAAO9J,KAAK,SAASmK,UAAWZ,KAChC,cAAC,IAAD,CAAOvJ,KAAK,UAAUmK,UAAWH,KACjC,cAAC,GAAD,CAAgBhK,KAAK,cAAcmK,UAAWzB,KAC9C,cAAC,IAAD,CAAO1I,KAAK,UAAUoK,OAAQ,SAAAjL,GAAK,OAAG,cAAC,GAAD,2BAAYA,GAAZ,IAAmBkC,KAAM,EAAKrC,MAAMqC,WAC1E,cAAC,IAAD,CAAOrB,KAAK,aAAamK,UAAWzD,KACpC,cAAC,IAAD,CAAO1G,KAAK,aAAamK,UAAWvD,KACpC,cAAC,IAAD,CAAO5G,KAAK,WAAWmK,UAAWxD,KAClC,cAAC,IAAD,CAAUiD,KAAK,IAAIU,OAAK,EAACrK,GAAG,YAC5B,cAAC,IAAD,CAAWA,GAAG,2B,GA7BFP,cCTH6K,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,YCGdQ,IAASZ,OACP,cAAC,IAAD,UACA,cAAC,GAAD,MAGAa,SAASC,eAAe,SAM1BX,O","file":"static/js/main.978fbe5d.chunk.js","sourcesContent":["/* import Raven from 'raven-js' */\r\n\r\n\r\nfunction init() {\r\n   /*  Raven.config('https://05323d37c9a947eba9daaaab1e6171a9@sentry.io/1249956',{\r\n        release: '1-0-0',\r\n        environment: 'development-test',\r\n    }).install(); */\r\n}\r\n\r\nfunction log(error) {\r\n    /* Raven.captureException(error); */\r\n    console.error(error)\r\n}\r\n\r\nexport default {\r\n    init,\r\n    log\r\n};","import axios from 'axios';\r\nimport {toast} from 'react-toastify'\r\nimport logger from './logService'\r\n\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\n\r\n\r\n\r\n\r\naxios.interceptors.response.use(null, error=>{\r\n    const expectedError = error.response && error.response.status >= 400 && error.response.status < 500\r\n    \r\n  \r\n    if(!expectedError) {\r\n        logger.log(error)\r\n      toast.error(\"An unexpected error occured.\")\r\n    }\r\n  \r\n  \r\n  \r\n  return Promise.reject(error)\r\n  \r\n  });\r\n\r\n function setJwt(jwt){\r\n    axios.defaults.headers.common['x-auth-token'] =jwt\r\n  }\r\n\r\n  export default {\r\n      get: axios.get,\r\n      post: axios.post,\r\n      put: axios.put,\r\n      delete: axios.delete,\r\n      setJwt\r\n  }","import http from './httpService'\r\n\r\n\r\nconst movieUrl = `/movies`\r\n\r\nfunction movieIdUrl(movieId){\r\n    return `${movieUrl}/${movieId}`\r\n}\r\n\r\nexport function getMovies() {\r\n return  http.get(movieUrl)\r\n\r\n}\r\nexport function deleteMovie(e) {\r\n    const id = e.target.value\r\n    return http.delete(movieIdUrl(id))\r\n   }\r\n   \r\nexport function getMovie(id){\r\n    try{\r\n        return http.get(movieIdUrl(id))\r\n    }\r\n    catch(ex){\r\n        return 'not found'\r\n    }\r\n     \r\n\r\n}\r\n\r\nexport function saveMovie(id,data) {\r\n    try{\r\n        return http.put(movieIdUrl(id),data)\r\n    }\r\n    catch(ex){\r\n        return 'not found'\r\n    }\r\n}\r\nexport function addMovie(data) {\r\n    try{\r\n        console.log(data)\r\n        return http.post(movieUrl, {...data})\r\n    }\r\n    catch(ex){\r\n        return 'not found'\r\n    }\r\n}\r\n\r\n","import http from './httpService'\r\n\r\n\r\nexport function getGenres() {\r\n return  http.get(`/genres`)\r\n\r\n}\r\n","import React, { Component } from 'react'\r\nclass Like extends Component {\r\n    state = {  }\r\n    render() { \r\n        let classes = 'fa fa-heart';\r\n        if(!this.props.liked)classes+='-o'\r\n        return ( \r\n         <i className={classes} aria-hidden=\"true\" style={{cursor:'pointer'}} onClick={this.props.onClick}/>\r\n         );\r\n    }\r\n}\r\n \r\nexport default Like ;","import React, { Component } from 'react'\r\nimport _ from 'lodash'\r\nimport {Link} from 'react-router-dom'\r\n\r\nclass TableBody extends Component {\r\n    renderCell = (item, column)=>{\r\n        if(column.content) return column.content(item)\r\n        if(column.path === 'title') {return <Link to={`/movies/${item._id}`}>{_.get(item,column.path)}</Link>}\r\n\r\n        return _.get(item,column.path)\r\n    }\r\n    state = {  }\r\n   \r\n    createKey=(item,column)=>{\r\n        return item._id + (column.path || column.key)\r\n    }\r\n\r\n    render() { \r\n        const {data, columns} = this.props\r\n        return ( <tbody>\r\n            {data.map(item=><tr key={item._id}>\r\n                {columns.map(column=><td key={this.createKey(item,column)}>{this.renderCell(item,column)}</td>)}\r\n            </tr>)}\r\n            \r\n\r\n        </tbody>\r\n\r\n         );\r\n    }\r\n}\r\n \r\nexport default TableBody\r\n;","import React, { Component } from 'react'\r\n\r\nclass TableHeader extends Component {\r\n    raiseSort = path =>{\r\n        const sort = {...this.props.sort};\r\n        if(sort.path === path)\r\n         sort.order = sort.order === \"asc\"? \"desc\":\"asc\";\r\n         else{\r\n             sort.path = path;\r\n             sort.order = 'asc';\r\n         }\r\n         this.props.onSort(sort)\r\n    }\r\n\r\n    renderSortIcon =(column)=>{\r\n        const {sort} = this.props\r\n        if(column.path !== this.props.sort.path) return null\r\n        if(sort.order === 'asc') return <i className=\"fa fa-sort-asc\"></i>\r\n        return <i className=\"fa fa-sort-desc\"></i>\r\n    }\r\n\r\n    render() { \r\n        return (  \r\n            <thead>\r\n                <tr>\r\n                    {this.props.columns.map(column => <th className=\"clickable\" key={column.path || column.key} scope='col' onClick={()=>this.raiseSort(column.path)}>{column.label} {this.renderSortIcon(column)}</th> )}\r\n                </tr>\r\n            </thead>\r\n        );\r\n    }\r\n}\r\n \r\nexport default TableHeader;","import React, { Component } from 'react'\r\nimport TableBody from './tableBody'\r\nimport TableHeader from './tableHeader'\r\n\r\n\r\nclass Table extends Component {\r\n\r\n    render() { \r\n        const {data,onSort,columns,sortColumn} = this.props\r\n        return (\r\n            <table className=\"table m-2\" >\r\n            <TableHeader columns={columns} sort={sortColumn} onSort={onSort}/>\r\n            <TableBody data={data} columns={columns}/>                    \r\n     </table>\r\n          );\r\n    }\r\n}\r\n \r\nexport default Table;","import http from \"./httpService\";\r\n\r\nimport jwtDecode from \"jwt-decode\";\r\n\r\n\r\n\r\nconst apiEndpoint =  \"/auth\";\r\nconst tokenKey = \"token\";\r\n\r\nhttp.setJwt(getJwt())\r\n\r\nexport async function login(user) {\r\n  const { data: jwt } = await http.post(apiEndpoint, user);\r\n  localStorage.setItem(tokenKey, jwt);\r\n}\r\nexport function logout() {\r\n  localStorage.removeItem(tokenKey);\r\n}\r\nexport function loginWithJwt(jwt) {\r\n  localStorage.setItem(tokenKey, jwt);\r\n}\r\n function getJwt(){\r\n    return localStorage.getItem(tokenKey)\r\n}\r\n\r\n\r\n\r\nexport function getCurrentUser() {\r\n  try {\r\n    const jwt = localStorage.getItem(tokenKey);\r\n    return jwtDecode(jwt);\r\n  } catch (ex) {\r\n    return null;\r\n  }\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport Like from './like'\r\nimport Table from './table'\r\nimport {getCurrentUser} from '../services/authService'\r\n\r\nclass MovieTable extends Component {\r\n    columns =[\r\n        {path:'title', label:\"Title\"},\r\n        {path:\"genre.name\", label:\"Genre\"},\r\n        {path:\"numberInStock\", label:\"Stock\"},\r\n        {path:\"dailyRentalRate\", label:\"Rate\"},\r\n        { key:\"like\", content:movie=><Like liked={movie.liked} onClick={()=>{this.props.onLike(movie)}}/>},\r\n    ]\r\n    \r\n    \r\n\r\n\r\n    render() { \r\n        let {columns} = this\r\n\r\n        if(getCurrentUser() && getCurrentUser().isAdmin ){\r\n          columns = [...columns,{key:'delete', content:movie=><button value={movie._id} className=\"btn btn-danger\" onClick={this.props.onDelete}>Delete</button>},]\r\n        }\r\n\r\n\r\n\r\n        const {movies,onSort} = this.props\r\n\r\n\r\n        return ( \r\n           <Table data={movies} columns={columns} onSort={onSort} sortColumn={this.props.sortColumn}/>\r\n\r\n\r\n         );\r\n    }\r\n}\r\n \r\nexport default MovieTable;","import React, { Component } from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport _ from \"lodash\";\r\n\r\nclass Pagination extends Component {\r\n  state = {};\r\n  render() {\r\n    const { itemsCount, pageSize,currentPage, onPageChange } = this.props;\r\n    const pagesCount = Math.ceil(itemsCount / pageSize);\r\n    if (pagesCount === 1) return null;\r\n    const pages = _.range(1, pagesCount + 1);\r\n    return (\r\n      <nav aria-label=\"Page navigation\">\r\n        <ul className=\"pagination m-2\">\r\n          {pages.map((p) => (\r\n            <li key={p} className={p === currentPage? 'page-item active':'page-item'}>\r\n              <a href=\"# \"className=\"page-link\"onClick={() => {onPageChange(p);}}>\r\n                {p}\r\n              </a>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nPagination.propTypes = {\r\n  itemsCount:PropTypes.number.isRequired,\r\n   pageSize:PropTypes.number.isRequired,\r\n  currentPage: PropTypes.number.isRequired,\r\n  onPageChange:PropTypes.func.isRequired\r\n  \r\n};\r\n\r\n\r\nexport default Pagination;\r\n","import _ from 'lodash'\r\n\r\n\r\nexport function paginate(items,pageNumber,pageSize){\r\n    const startIndex = (pageNumber-1)* pageSize\r\n    return _(items).slice(startIndex).take(pageSize).value();\r\n}","import React, { Component } from 'react'\r\n\r\n\r\nclass Filtering extends Component {\r\n    state = {  }\r\n    render() { \r\n        const {onGenreChange,currentFilter,items,textProperty,valueProperty} = this.props\r\n\r\n        return (\r\n            <div className=\"list-group \">\r\n                \r\n                    <a  href=\"# \" className={currentFilter === 'allGenres' ? 'list-group-item list-group-item-action active':'list-group-item list-group-item-action'} onClick={()=>onGenreChange(\"allGenres\")}>All genres</a>\r\n                    {items.map(g=>{return<a href=\"# \" key={g[valueProperty]} className={g[textProperty] === currentFilter?'list-group-item list-group-item-action active':'list-group-item list-group-item-action'} onClick={()=>onGenreChange(g.name)}>{g.name}</a>})}\r\n            \r\n            </div>\r\n            \r\n        );\r\n    }\r\n}\r\n \r\nexport default Filtering;","import { identity } from 'lodash';\r\nimport http from './httpService'\r\n\r\n\r\nconst apiEndpoint = '/users';\r\n\r\nexport function register(user){\r\n        return http.post(apiEndpoint,user)\r\n  \r\n\r\n}\r\nexport async function getUserData() {\r\n        return  http.get(apiEndpoint+\"/me\") \r\n        \r\n      }\r\nexport async function updateUser(user){  \r\n        const id = user._id\r\n        await http.put(apiEndpoint+ \"/me\",user)\r\n}","import React,{Component} from 'react';\r\nimport {getMovies,deleteMovie} from '../services/movieService';\r\nimport {getGenres} from '../services/genreService'\r\nimport MoviesTable from '../components/moviesTable'\r\nimport _ from 'lodash'\r\nimport Pagination from './pagination'\r\nimport {paginate} from '../utils/paginate'\r\nimport Filtering from '../components/filtering'\r\nimport {NavLink} from 'react-router-dom'\r\nimport { toast } from 'react-toastify';\r\nimport {getUserData,updateUser} from '../services/userService'\r\n\r\nexport default class Movies extends Component {\r\n    state = {\r\n        search:'',\r\n        movies:[],\r\n        moviesByGenre:[],\r\n        genres:[],\r\n        pageSize:4,\r\n        currentPage: 1,\r\n        currentFilter:\"allGenres\",\r\n        sort:{path:'title',order:'asc'},\r\n        count:'',\r\n        user:''\r\n    };\r\n   \r\n  async componentDidMount(){\r\n      const {data:genres} = await getGenres()\r\n      \r\n      const {data:movies} = await getMovies()\r\n\r\n       try{ const {data:user} = await getUserData()\r\n        this.setState({user})\r\n        const {liked} = user\r\n        liked.forEach(i=>{\r\n            movies.find(m=>{if(m._id ===i )return m.liked = true}) \r\n             this.setState({movies,moviesByGenre:movies,genres})     \r\n        })}\r\n        catch(ex){\r\n            this.setState({movies,moviesByGenre:movies,genres})\r\n        }\r\n\r\n        this.setState({movies,moviesByGenre:movies,genres})  \r\n\r\n    }\r\n\r\n\r\n    handleDelete =  async(e)=>{\r\n        const originalMovies = this.state.movies\r\n        const originalMoviesByGenre = this.state.moviesByGenre\r\n\r\n        const movies = this.state.movies.filter(m=>m._id !== e.target.value);\r\n        const moviesByGenre = this.state.moviesByGenre.filter(m=>m._id !== e.target.value)\r\n        this.setState({movies, moviesByGenre}) \r\n\r\n\r\n        try{\r\n             await deleteMovie(e)\r\n             }\r\n             catch(ex){\r\n                if(ex.response && ex.response.status === 404){\r\n                   toast.error('This movie has already been removed')\r\n                    this.setState({movies:originalMovies,moviesByGenre:originalMoviesByGenre})\r\n                }\r\n                if(ex.response && ex.response.status === 403){\r\n                    toast.error(ex.response.data)\r\n                     this.setState({movies:originalMovies,moviesByGenre:originalMoviesByGenre})\r\n                 }\r\n                 if(ex.response && ex.response.status === 400){\r\n                    toast.error('Please login to make changes')\r\n                     this.setState({movies:originalMovies,moviesByGenre:originalMoviesByGenre})\r\n                 }\r\n             }\r\n        /* const{data:movies} = await getMovies()\r\n        this.setState({movies,moviesByGenre:movies})\r\n      */\r\n    \r\n    }\r\n    handleLike=async (movie)=>{\r\n    \r\n        try{\r\n          \r\n        const {user} = this.state\r\n       \r\n       \r\n        let liked ;\r\n\r\n        let Userliked = user.liked\r\n        \r\n        const a = Userliked.find(i=>i === movie._id)\r\n\r\n        if(a){liked = true}\r\n\r\n\r\n       \r\n        \r\n\r\n            \r\n        \r\n\r\n\r\n        const originalMovies = [...this.state.movies]\r\n        const movies = [...this.state.movies];\r\n        const index = movies.indexOf(movie);\r\n        movies[index].liked = !liked;\r\n        this.setState({movies})\r\n        \r\n        liked?user.liked.splice(user.liked.indexOf(movie._id,1)):user.liked.push(movie._id)\r\n            this.setState({user})\r\n            \r\n            await updateUser(user) \r\n        \r\n         \r\n        }\r\n         catch(ex){\r\n             return\r\n         }\r\n        \r\n        \r\n\r\n    /*  const movies = [...this.state.movies];\r\n     const index = movies.indexOf(movie);\r\n     movies[index].liked = !movies[index].liked;\r\n     this.setState({movies}) */\r\n    }\r\n    handlePageChange=(page)=>{\r\n\r\n      this.setState({currentPage:page})\r\n    }\r\n\r\n    handleGenreChange =(genre)=>{\r\n        this.setState({currentFilter:genre,currentPage:1})\r\n        if(genre === 'allGenres') return this.setState({movies:this.state.moviesByGenre})\r\n        let moviesByGenre = [...this.state.moviesByGenre]\r\n        moviesByGenre = moviesByGenre.filter(m=>m.genre.name === genre)\r\n        this.setState({\r\n            movies:moviesByGenre\r\n        })\r\n       \r\n    }   \r\n    handleSort = (sort)=>{\r\n       \r\n        this.setState({sort})\r\n\r\n    }\r\n    \r\n    handleChange = ({currentTarget:input})=>{\r\n\r\n        let search = ''\r\n        search = search += input.value\r\n        this.setState({search,currentPage:1})\r\n        \r\n\r\n    }\r\n    getPageData = () =>{\r\n        \r\n        const {pageSize,currentPage,movies:allMovies} = this.state\r\n        const reg = new RegExp(this.state.search,'i')\r\n        const movs = [...allMovies]\r\n        const searched = allMovies.filter(m=>{return m.title.match(reg)})\r\n        const sorted = _.orderBy(searched,[this.state.sort.path],[this.state.sort.order])\r\n        return  {movies:paginate(sorted,currentPage,pageSize),count:searched.length,count2:movs};\r\n    }\r\n\r\n    render(){\r\n       \r\n\r\n        const {user} = this.props\r\n        \r\n        const {movies,count,count2} = this.getPageData()\r\n       \r\n     \r\n\r\n\r\n       if(count2.length>0){ return(\r\n           \r\n\r\n               \r\n           <div className='row'>\r\n            <div className=\"col-2\">\r\n                 <Filtering onGenreChange={this.handleGenreChange} currentFilter={this.state.currentFilter}  items={this.state.genres} textProperty=\"name\" valueProperty=\"_id\"/>    \r\n            </div>\r\n            <div className='col'>\r\n                {user && <NavLink to=\"/movies/new\"><button className=\"btn btn-primary m-2\" onClick={this.handleLink}>New Movie</button></NavLink>}\r\n                <input type=\"text\" className=\"form-control m-2\" placeholder=\"Search...\" value={this.state.search} onChange={this.handleChange}/>\r\n                <p className=\"m-2\">Showing {movies.length} {movies.length >1?'movies':'movie'} out of {this.state.movies.length}</p>\r\n                 <MoviesTable  movies={movies} onDelete={this.handleDelete} onLike={this.handleLike} onSort={this.handleSort} sortColumn={this.state.sort}/>\r\n                <Pagination itemsCount={count} pageSize={this.state.pageSize} onPageChange={this.handlePageChange} currentPage={this.state.currentPage}/>\r\n            </div>\r\n            </div>\r\n            \r\n\r\n        )}\r\n        else{\r\n            return(\r\n                <div className=\"row\">\r\n                    <div className=\"col-2\">\r\n                <Filtering onGenreChange={this.handleGenreChange} currentFilter={this.state.currentFilter}  items={this.state.genres} textProperty=\"name\" valueProperty=\"_id\"/> \r\n                </div>\r\n                <div className=\"col\">\r\n                <div className=\"header\"><p>there are no {this.state.currentFilter !== 'allGenres'?this.state.currentFilter:''} movies in the database</p></div>\r\n                <NavLink to=\"/movies/new\"><button className=\"btn btn-primary\" onClick={this.handleLink}>New Movie</button></NavLink>\r\n                </div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n\r\n    }\r\n}","import React from 'react'\r\n\r\nexport default function Customers() {\r\n    return (\r\n        <div>\r\n                <h1>Customers</h1>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nexport default function Rentals() {\r\n    return (\r\n        <div>\r\n            <h1>Rentals</h1>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\n const NotFound = ()=> {\r\n    return (\r\n        <div>\r\n            <h1>404 page not found</h1>\r\n        </div>\r\n    )\r\n}\r\nexport default NotFound","\r\nimport {NavLink} from 'react-router-dom'\r\nimport React from 'react'\r\n \r\nconst NavBar = ({user})=> {\r\n    return (\r\n        <nav className=\"navbar navbar-expand-lg navbar-light bg-light \">\r\n  <NavLink className=\"navbar-brand\" to=\"\">Vidly</NavLink>\r\n  <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n    <span className=\"navbar-toggler-icon\"></span>\r\n  </button>\r\n  <div className=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n    <ul className=\"navbar-nav\">\r\n        <NavLink className=\"nav-link\" to=\"/movies\">Movies</NavLink>\r\n        <NavLink className=\"nav-link\" to=\"/customers\">Customers</NavLink>\r\n        <NavLink className=\"nav-link\" to=\"/rentals\">Rentals</NavLink>\r\n       {!user && \r\n       <React.Fragment>\r\n       <NavLink className=\"nav-link\" to=\"/login\">Login</NavLink>\r\n        <NavLink className=\"nav-link\" to='/register'>Register</NavLink>\r\n        </React.Fragment>\r\n} {user && \r\n       <React.Fragment>\r\n       <NavLink className=\"nav-link\" to=\"/profile\">{user.name}</NavLink>\r\n        <NavLink className=\"nav-link\" to='/logout'>Logout</NavLink>\r\n        </React.Fragment>\r\n}\r\n    </ul>\r\n  </div>\r\n</nav>\r\n    )\r\n}\r\n\r\n \r\nexport default NavBar;","import React from \"react\";\r\n\r\nexport default function Input({ name, label,error,...rest }) {\r\n  return (\r\n    <div className=\"m-2\">\r\n      <label htmlFor={name}>{label}</label>\r\n      <input\r\n        {...rest}\r\n        name={name}\r\n        id={name}\r\n        className=\"form-control \"\r\n      />\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n    </div>\r\n  );\r\n}\r\n","import  { Component } from 'react'\r\nimport Joi from 'joi-browser'\r\nimport Input from './input'\r\n\r\nclass Form extends Component {\r\n    state = { \r\n        data:{},\r\n        errors:{}\r\n\r\n     };\r\n\r\n     validateProperty =({name,value})=>{\r\n        const obj={[name]:value}\r\n        const schema = {[name]:this.schema[name]}\r\n        const {error} = Joi.validate(obj, schema)\r\n        return error? error.details[0].message:null\r\n      \r\n        \r\n        \r\n    }\r\n    validate = () => {\r\n        const options = {abortEarly:false}\r\n       const {error} =  Joi.validate(this.state.data, this.schema,options)\r\n      \r\n       if(!error) return null;\r\n\r\n        const errors = {};\r\n        for(let item of error.details)\r\n        errors[item.path[0]] = item.message\r\n        return errors\r\n\r\n    }\r\n\r\n    \r\n    handleSubmit = e =>{\r\n        e.preventDefault();\r\n\r\n        const errors = this.validate()\r\n        this.setState({errors:errors||{}});\r\n        if(errors) return console.log(errors);\r\n\r\n         this.doSubmit()\r\n\r\n    }\r\n\r\n\r\n    handleChange = ({currentTarget:input}) =>{\r\n        const errors = {...this.state.errors}\r\n        const errorMessage = this.validateProperty(input)\r\n        if(errorMessage) errors[input.name] = errorMessage\r\n        else delete errors[input.name]\r\n\r\n        const data = {...this.state.data}\r\n        data[input.name] = input.value\r\n        this.setState({data,errors});\r\n    }\r\n    renderButton(label){\r\n       return  <button disabled={this.validate()} className=\"btn btn-primary m-2\">{label}</button>\r\n    }\r\n\r\n    renderInput(name,label,type = 'text') {\r\n        const {data,errors} =  this.state\r\n        return <Input name={name} type={type} value={data[name]} label={label} onChange={this.handleChange} error={errors[name]}/>\r\n    }\r\n\r\n}\r\n \r\nexport default Form;","import React, { Component } from \"react\";\r\n\r\nclass Selector extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"form-group m-2\">\r\n            <label htmlFor=\"genres\">Genres</label>\r\n          <select  name=\"genres\"className=\"custom-select\" required onChange={this.props.onChange}>\r\n            <option value=\"\">Open this select menu</option>\r\n            {this.props.data.map(d=><option key={d._id} value={d.name} selected={this.props.selected === d.name?true:false}>{d.name}</option>)}\r\n            </select>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Selector;\r\n","import React from 'react'\r\n\r\nimport Form from './form'\r\nimport Selector from './Selector';\r\nimport {getGenres} from '../services/genreService'\r\nimport Joi from 'joi-browser'\r\nimport { getMovie, saveMovie ,addMovie} from './../services/movieService';\r\nimport {toast} from 'react-toastify'\r\n\r\nclass MovieForm extends Form {\r\n    state = {\r\n         data:{title:\"\",genre:\"\",numberInStock:\"\",dailyRentalRate:\"\",genres:[]},\r\n         errors:{},\r\n         selectedGenre:\"\"\r\n        }\r\n        schema = {\r\n            title: Joi.string().required().label('Title'),\r\n            numberInStock: Joi.number().required().label('Stock'),\r\n            dailyRentalRate: Joi.number().required().label('Rate'),\r\n            genres:Joi.required()\r\n        }\r\n\r\n        async componentDidMount(){\r\n            if(this.props.match.params.id !== 'new'){ \r\n\r\n                try{\r\n                    const {data:movie} = await getMovie(this.props.match.params.id)\r\n                    const {data:genres} = await getGenres()\r\n                    const {title,numberInStock,dailyRentalRate,genre} = movie\r\n                    this.setState({data:{title,numberInStock,dailyRentalRate,genres},selectedGenre:genre.name})\r\n                    console.log(movie)\r\n                }\r\n                catch(ex){\r\n                    if(ex.response && ex.response.status === 404){\r\n                        toast.error('Movie not found')\r\n                       this.props.history.push('/not-found')\r\n                    }\r\n                }\r\n             }\r\n             else{\r\n            const {data:genres} = await getGenres()\r\n             this.setState({data:{title:\"\",numberInStock:\"\",dailyRentalRate:\"\",genres:genres}})\r\n             }\r\n        }\r\n\r\n\r\n        handleGenreSet = (e)=>{\r\n          this.setState({selectedGenre:e.target.value})\r\n           \r\n        }\r\n    \r\n        doSubmit = async() => {\r\n            const _id = this.props.match.params.id;\r\n            \r\n\r\n            const {title,dailyRentalRate,genres,numberInStock} = this.state.data\r\n            const genre = genres.find(g=>g.name === this.state.selectedGenre)\r\n            const movie = {title,dailyRentalRate,genreId:genre._id,numberInStock}\r\n            if(_id === 'new'){\r\n                console.log(movie)\r\n                 await addMovie(movie)\r\n            }\r\n            else{\r\n                await saveMovie(_id,movie)\r\n            }\r\n        \r\n\r\n            this.props.history.push('/movies')\r\n           \r\n        }\r\n\r\n    render() { \r\n            const {genres} = this.state.data\r\n         \r\n            return (\r\n                <div>            \r\n                    <h1 className=\"m-2\">Movie form</h1>\r\n                    <form onSubmit={this.handleSubmit}>\r\n                    {this.renderInput('title','Title')}\r\n                    {this.renderInput('numberInStock','Stock')}\r\n                    <Selector data={genres} selected={this.state.selectedGenre} onChange={this.handleGenreSet}/>\r\n                    {this.renderInput('dailyRentalRate','Rate')}\r\n                    {this.renderButton('Save')}\r\n                </form>\r\n                \r\n            </div>\r\n             \r\n             )\r\n    }\r\n}\r\n \r\nexport default MovieForm;\r\n\r\n\r\n    \r\n    \r\n\r\n","import React from \"react\";\r\nimport Joi from \"joi-browser\";\r\nimport Form from \"./form\";\r\nimport { getCurrentUser, login } from \"../services/authService\";\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nclass LoginForm extends Form {\r\n  state = {\r\n    data: { email: \"\", password: \"\" },\r\n    errors: {},\r\n  };\r\n  schema = {\r\n    email: Joi.string().required().label(\"Username\").email(),\r\n    password: Joi.string().required().label(\"Password\"),\r\n  };\r\n  doSubmit = async () => {\r\n    try {\r\n      await login(this.state.data);\r\n      console.log(this.props.location)\r\n      const { state } = this.props.location;\r\n\r\n      window.location = state ? state.from.pathname : \"/\";\r\n    } catch (ex) {\r\n      if (ex.response && ex.response.status === 400) {\r\n        const errors = { ...this.state.errors };\r\n        errors.email = ex.response.data;\r\n        this.setState({ errors });\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    if(getCurrentUser()) return <Redirect to=\"/\"/>\r\n\r\n\r\n\r\n    return (\r\n      <div>\r\n        <h1 className=\"m-2\">Login</h1>\r\n        <form onSubmit={this.handleSubmit}>\r\n          {this.renderInput(\"email\", \"Email\", \"email\")}\r\n          {this.renderInput(\"password\", \"Password\", \"password\")}\r\n          {this.renderButton(\"Login\")}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n","import React from 'react'\r\nimport Form from './form'\r\nimport Joi from 'joi-browser'\r\nimport {register} from '../services/userService'\r\nimport { loginWithJwt } from './../services/authService';\r\nimport { Redirect } from 'react-router-dom';\r\nimport {getCurrentUser} from '../services/authService'\r\n\r\nclass RegisterForm extends Form {\r\n    state = {  \r\n        data:{email:\"\",password:\"\",name:\"\"},\r\n        errors:{}\r\n    }\r\n    schema = {\r\n        email: Joi.string().required().label('Email').email(),\r\n        password: Joi.string().required().label('Password').min(5),\r\n        name: Joi.string().required().label('Name')\r\n    }\r\n\r\n    doSubmit = async() => {\r\n\r\n    try{\r\n         const response = await register(this.state.data)\r\n         loginWithJwt(response.headers['x-auth-token'])\r\n         window.location = '/'\r\n    }\r\n    catch(ex){\r\n        if(ex.response && ex.response.status === 400){\r\n            const errors = {...this.state.errors};\r\n            errors.email = ex.response.data;\r\n            this.setState({errors});\r\n        }\r\n    }\r\n\r\n    \r\n    }\r\n\r\n    render() { \r\n        if(getCurrentUser()) return <Redirect to=\"/\"/>\r\n        return ( \r\n            <div>\r\n            <h1 className=\"m-2\">Register</h1>\r\n            <form onSubmit={this.handleSubmit}>\r\n            {this.renderInput('email','Email','email')}\r\n            {this.renderInput('password',\"Password\",\"password\")}\r\n            {this.renderInput('name',\"Name\",'text')}\r\n            {this.renderButton('Register')}\r\n            </form>\r\n            </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default RegisterForm;","import { Component } from 'react'\r\nimport {logout} from '../services/authService'\r\n\r\nclass Logout extends Component {\r\n\r\n    componentDidMount() {\r\n        logout()\r\n        window.location = '/'\r\n    }\r\n    \r\n\r\n\r\n    render() { \r\n        return null;\r\n    }\r\n}\r\n \r\nexport default Logout;","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { getCurrentUser } from \"../services/authService\";\r\n\r\nconst protectedRoute = ({ path, component: Component, render, ...rest }) => {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (!getCurrentUser()) return <Redirect to={{pathname:'/login',state:{ from:props.location}}} />;\r\n        return Component ? <Component {...props} /> : render({...props});\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default protectedRoute;\r\n","import React , {Component}from 'react';\nimport {Route,Switch,Redirect} from 'react-router-dom'\nimport { ToastContainer } from 'react-toastify';\nimport Movies from './components/Movies';\nimport Customers from './components/customers';\nimport Rentals from './components/rentals';\nimport NotFound from './components/notfound'\nimport NavBar from './components/navbar';\nimport MovieForm from './components/movieform';\nimport LoginForm from './components/loginForm';\nimport RegisterForm from './components/registerForm';\nimport Logout from './components/logout'\nimport ProtectedRoute from './components/protectedRoute';\nimport { getCurrentUser } from './services/authService';\nimport 'react-toastify/dist/ReactToastify.css'\nimport './App.css';\n\n\n\n\n\nclass App extends Component {\n  state={\n\n  }\n\n  componentDidMount() {\n    const user = getCurrentUser()\n    this.setState({user})\n\n  }\n  \n\n \nrender(){\n  return (\n    <div>\n      <ToastContainer/>\n    <NavBar user={this.state.user}/>\n    <main className=\"container\">\n      <Switch>\n      <Route path=\"/register\" component={RegisterForm}/>\n      <Route path=\"/login\" component={LoginForm}/> \n      <Route path=\"/logout\" component={Logout}/>    \n      <ProtectedRoute path=\"/movies/:id\" component={MovieForm}/>\n      <Route path=\"/movies\" render={props =><Movies {...props} user={this.state.user}/>}/>\n      <Route path=\"/customers\" component={Customers}/>\n      <Route path=\"/not-found\" component={NotFound}/>\n      <Route path=\"/rentals\" component={Rentals}/>\n      <Redirect from='/' exact to='/movies'/>\n      <Redirect  to='/not-found'/>\n      </Switch>\n    </main>\n    </div>\n  );\n }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'font-awesome/css/font-awesome.css';\nimport { BrowserRouter } from 'react-router-dom';\n\n\nReactDOM.render(\n  <BrowserRouter>\n  <App/>\n  </BrowserRouter>,\n  \n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}