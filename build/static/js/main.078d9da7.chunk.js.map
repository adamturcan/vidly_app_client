{"version":3,"sources":["services/logService.js","services/httpService.js","services/movieService.js","services/genreService.js","components/like.jsx","components/tableBody.jsx","components/tableHeader.jsx","components/table.jsx","services/authService.js","components/moviesTable.jsx","components/pagination.jsx","utils/paginate.js","components/filtering.jsx","components/Movies.jsx","components/customers.jsx","components/rentals.jsx","components/notfound.jsx","components/navbar.jsx","components/input.jsx","components/form.jsx","components/Selector.jsx","components/movieform.jsx","components/loginForm.jsx","services/userService.js","components/registerForm.jsx","components/logout.jsx","components/protectedRoute.jsx","App.js","reportWebVitals.js","index.js"],"names":["init","log","error","console","axios","defaults","baseURL","process","interceptors","response","use","status","logger","toast","Promise","reject","get","post","put","delete","setJwt","jwt","headers","common","movieUrl","movieIdUrl","movieId","deleteMovie","e","id","target","value","http","getMovie","ex","saveMovie","data","addMovie","getGenres","Like","state","classes","this","props","liked","className","aria-hidden","style","cursor","onClick","Component","TableBody","renderCell","item","column","content","path","to","_id","_","createKey","key","columns","map","TableHeader","raiseSort","sort","order","onSort","renderSortIcon","scope","label","Table","sortColumn","apiEndpoint","tokenKey","login","user","a","localStorage","setItem","loginWithJwt","getCurrentUser","getItem","jwtDecode","MovieTable","movie","onLike","isAdmin","onDelete","movies","Pagination","itemsCount","pageSize","currentPage","onPageChange","pagesCount","Math","ceil","pages","range","aria-label","p","href","paginate","items","pageNumber","startIndex","slice","take","Filtering","onGenreChange","currentFilter","textProperty","valueProperty","g","name","Movies","search","moviesByGenre","genres","count","handleDelete","originalMovies","originalMoviesByGenre","filter","m","setState","handleLike","index","indexOf","handlePageChange","page","handleGenreChange","genre","handleSort","handleChange","currentTarget","getPageData","allMovies","reg","RegExp","movs","searched","title","match","orderBy","length","count2","handleLink","type","placeholder","onChange","Customers","Rentals","NotFound","NavBar","data-toggle","data-target","aria-controls","aria-expanded","Fragment","Input","rest","htmlFor","Form","errors","validateProperty","obj","schema","Joi","validate","details","message","abortEarly","handleSubmit","preventDefault","doSubmit","input","errorMessage","disabled","Selector","required","d","selected","MovieForm","numberInStock","dailyRentalRate","selectedGenre","string","number","handleGenreSet","params","find","genreId","history","push","onSubmit","renderInput","renderButton","LoginForm","email","password","location","window","from","pathname","register","RegisterForm","min","Logout","removeItem","protectedRoute","component","render","App","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.078d9da7.chunk.js","sourcesContent":["/* import Raven from 'raven-js' */\r\n\r\n\r\nfunction init() {\r\n   /*  Raven.config('https://05323d37c9a947eba9daaaab1e6171a9@sentry.io/1249956',{\r\n        release: '1-0-0',\r\n        environment: 'development-test',\r\n    }).install(); */\r\n}\r\n\r\nfunction log(error) {\r\n    /* Raven.captureException(error); */\r\n    console.error(error)\r\n}\r\n\r\nexport default {\r\n    init,\r\n    log\r\n};","import axios from 'axios';\r\nimport {toast} from 'react-toastify'\r\nimport logger from './logService'\r\n\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\n\r\n\r\n\r\n\r\naxios.interceptors.response.use(null, error=>{\r\n    const expectedError = error.response && error.response.status >= 400 && error.response.status < 500\r\n    \r\n  \r\n    if(!expectedError) {\r\n        logger.log(error)\r\n      toast.error(\"An unexpected error occured.\")\r\n    }\r\n  \r\n  \r\n  \r\n  return Promise.reject(error)\r\n  \r\n  });\r\n\r\n function setJwt(jwt){\r\n    axios.defaults.headers.common['x-auth-token'] =jwt\r\n  }\r\n\r\n  export default {\r\n      get: axios.get,\r\n      post: axios.post,\r\n      put: axios.put,\r\n      delete: axios.delete,\r\n      setJwt\r\n  }","import http from './httpService'\r\n\r\n\r\nconst movieUrl = `/movies`\r\n\r\nfunction movieIdUrl(movieId){\r\n    return `${movieUrl}/${movieId}`\r\n}\r\n\r\nexport function getMovies() {\r\n return  http.get(movieUrl)\r\n\r\n}\r\nexport function deleteMovie(e) {\r\n    const id = e.target.value\r\n    return http.delete(movieIdUrl(id))\r\n   }\r\n   \r\nexport function getMovie(id){\r\n    try{\r\n        return http.get(movieIdUrl(id))\r\n    }\r\n    catch(ex){\r\n        return 'not found'\r\n    }\r\n     \r\n\r\n}\r\n\r\nexport function saveMovie(id,data) {\r\n    try{\r\n        return http.put(movieIdUrl(id),data)\r\n    }\r\n    catch(ex){\r\n        return 'not found'\r\n    }\r\n}\r\nexport function addMovie(data) {\r\n    try{\r\n        console.log(data)\r\n        return http.post(movieUrl, {...data})\r\n    }\r\n    catch(ex){\r\n        return 'not found'\r\n    }\r\n}\r\n\r\n","import http from './httpService'\r\n\r\n\r\nexport function getGenres() {\r\n return  http.get(`/genres`)\r\n\r\n}\r\n","import React, { Component } from 'react'\r\nclass Like extends Component {\r\n    state = {  }\r\n    render() { \r\n        let classes = 'fa fa-heart';\r\n        if(!this.props.liked)classes+='-o'\r\n        return ( \r\n         <i className={classes} aria-hidden=\"true\" style={{cursor:'pointer'}} onClick={this.props.onClick}/>\r\n         );\r\n    }\r\n}\r\n \r\nexport default Like ;","import React, { Component } from 'react'\r\nimport _ from 'lodash'\r\nimport {Link} from 'react-router-dom'\r\n\r\nclass TableBody extends Component {\r\n    renderCell = (item, column)=>{\r\n        if(column.content) return column.content(item)\r\n        if(column.path === 'title') {return <Link to={`/movies/${item._id}`}>{_.get(item,column.path)}</Link>}\r\n\r\n        return _.get(item,column.path)\r\n    }\r\n    state = {  }\r\n   \r\n    createKey=(item,column)=>{\r\n        return item._id + (column.path || column.key)\r\n    }\r\n\r\n    render() { \r\n        const {data, columns} = this.props\r\n        return ( <tbody>\r\n            {data.map(item=><tr key={item._id}>\r\n                {columns.map(column=><td key={this.createKey(item,column)}>{this.renderCell(item,column)}</td>)}\r\n            </tr>)}\r\n            \r\n\r\n        </tbody>\r\n\r\n         );\r\n    }\r\n}\r\n \r\nexport default TableBody\r\n;","import React, { Component } from 'react'\r\n\r\nclass TableHeader extends Component {\r\n    raiseSort = path =>{\r\n        const sort = {...this.props.sort};\r\n        if(sort.path === path)\r\n         sort.order = sort.order === \"asc\"? \"desc\":\"asc\";\r\n         else{\r\n             sort.path = path;\r\n             sort.order = 'asc';\r\n         }\r\n         this.props.onSort(sort)\r\n    }\r\n\r\n    renderSortIcon =(column)=>{\r\n        const {sort} = this.props\r\n        if(column.path !== this.props.sort.path) return null\r\n        if(sort.order === 'asc') return <i className=\"fa fa-sort-asc\"></i>\r\n        return <i className=\"fa fa-sort-desc\"></i>\r\n    }\r\n\r\n    render() { \r\n        return (  \r\n            <thead>\r\n                <tr>\r\n                    {this.props.columns.map(column => <th className=\"clickable\" key={column.path || column.key} scope='col' onClick={()=>this.raiseSort(column.path)}>{column.label} {this.renderSortIcon(column)}</th> )}\r\n                </tr>\r\n            </thead>\r\n        );\r\n    }\r\n}\r\n \r\nexport default TableHeader;","import React, { Component } from 'react'\r\nimport TableBody from './tableBody'\r\nimport TableHeader from './tableHeader'\r\n\r\n\r\nclass Table extends Component {\r\n\r\n    render() { \r\n        const {data,onSort,columns,sortColumn} = this.props\r\n        return (\r\n            <table className=\"table m-2\" >\r\n            <TableHeader columns={columns} sort={sortColumn} onSort={onSort}/>\r\n            <TableBody data={data} columns={columns}/>                    \r\n     </table>\r\n          );\r\n    }\r\n}\r\n \r\nexport default Table;","import http from \"./httpService\";\r\n\r\nimport jwtDecode from \"jwt-decode\";\r\n\r\n\r\n\r\nconst apiEndpoint =  \"/auth\";\r\nconst tokenKey = \"token\";\r\n\r\nhttp.setJwt(getJwt())\r\n\r\nexport async function login(user) {\r\n  const { data: jwt } = await http.post(apiEndpoint, user);\r\n  localStorage.setItem(tokenKey, jwt);\r\n}\r\nexport function logout() {\r\n  localStorage.removeItem(tokenKey);\r\n}\r\nexport function loginWithJwt(jwt) {\r\n  localStorage.setItem(tokenKey, jwt);\r\n}\r\n function getJwt(){\r\n    return localStorage.getItem(tokenKey)\r\n}\r\n\r\n\r\n\r\nexport function getCurrentUser() {\r\n  try {\r\n    const jwt = localStorage.getItem(tokenKey);\r\n    return jwtDecode(jwt);\r\n  } catch (ex) {\r\n    return null;\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport Like from './like'\r\nimport Table from './table'\r\nimport {getCurrentUser} from '../services/authService'\r\n\r\nclass MovieTable extends Component {\r\n    columns =[\r\n        {path:'title', label:\"Title\"},\r\n        {path:\"genre.name\", label:\"Genre\"},\r\n        {path:\"numberInStock\", label:\"Stock\"},\r\n        {path:\"dailyRentalRate\", label:\"Rate\"},\r\n        { key:\"like\", content:movie=><Like liked={movie.liked} onClick={()=>{this.props.onLike(movie)}}/>},\r\n    ]\r\n    \r\n    \r\n\r\n\r\n    render() { \r\n        let {columns} = this\r\n\r\n        if(getCurrentUser() && getCurrentUser().isAdmin ){\r\n          columns = [...columns,{key:'delete', content:movie=><button value={movie._id} className=\"btn btn-danger\" onClick={this.props.onDelete}>Delete</button>},]\r\n        }\r\n\r\n\r\n\r\n        const {movies,onSort} = this.props\r\n\r\n\r\n        return ( \r\n           <Table data={movies} columns={columns} onSort={onSort} sortColumn={this.props.sortColumn}/>\r\n\r\n\r\n         );\r\n    }\r\n}\r\n \r\nexport default MovieTable;","import React, { Component } from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport _ from \"lodash\";\r\n\r\nclass Pagination extends Component {\r\n  state = {};\r\n  render() {\r\n    const { itemsCount, pageSize,currentPage, onPageChange } = this.props;\r\n    const pagesCount = Math.ceil(itemsCount / pageSize);\r\n    if (pagesCount === 1) return null;\r\n    const pages = _.range(1, pagesCount + 1);\r\n    return (\r\n      <nav aria-label=\"Page navigation\">\r\n        <ul className=\"pagination m-2\">\r\n          {pages.map((p) => (\r\n            <li key={p} className={p === currentPage? 'page-item active':'page-item'}>\r\n              <a href=\"# \"className=\"page-link\"onClick={() => {onPageChange(p);}}>\r\n                {p}\r\n              </a>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nPagination.propTypes = {\r\n  itemsCount:PropTypes.number.isRequired,\r\n   pageSize:PropTypes.number.isRequired,\r\n  currentPage: PropTypes.number.isRequired,\r\n  onPageChange:PropTypes.func.isRequired\r\n  \r\n};\r\n\r\n\r\nexport default Pagination;\r\n","import _ from 'lodash'\r\n\r\n\r\nexport function paginate(items,pageNumber,pageSize){\r\n    const startIndex = (pageNumber-1)* pageSize\r\n    return _(items).slice(startIndex).take(pageSize).value();\r\n}","import React, { Component } from 'react'\r\n\r\n\r\nclass Filtering extends Component {\r\n    state = {  }\r\n    render() { \r\n        const {onGenreChange,currentFilter,items,textProperty,valueProperty} = this.props\r\n\r\n        return (\r\n            <div className=\"list-group \">\r\n                \r\n                    <a  href=\"# \" className={currentFilter === 'allGenres' ? 'list-group-item list-group-item-action active':'list-group-item list-group-item-action'} onClick={()=>onGenreChange(\"allGenres\")}>All genres</a>\r\n                    {items.map(g=>{return<a href=\"# \" key={g[valueProperty]} className={g[textProperty] === currentFilter?'list-group-item list-group-item-action active':'list-group-item list-group-item-action'} onClick={()=>onGenreChange(g.name)}>{g.name}</a>})}\r\n            \r\n            </div>\r\n            \r\n        );\r\n    }\r\n}\r\n \r\nexport default Filtering;","import React,{Component} from 'react';\r\nimport {getMovies,deleteMovie} from '../services/movieService';\r\nimport {getGenres} from '../services/genreService'\r\nimport MoviesTable from '../components/moviesTable'\r\nimport _ from 'lodash'\r\nimport Pagination from './pagination'\r\nimport {paginate} from '../utils/paginate'\r\nimport Filtering from '../components/filtering'\r\nimport {NavLink} from 'react-router-dom'\r\nimport { toast } from 'react-toastify';\r\n\r\n\r\n\r\nexport default class Movies extends Component {\r\n    state = {\r\n        search:'',\r\n        movies:[],\r\n        moviesByGenre:[],\r\n        genres:[],\r\n        pageSize:4,\r\n        currentPage: 1,\r\n        currentFilter:\"allGenres\",\r\n        sort:{path:'title',order:'asc'},\r\n        count:''\r\n    };\r\n   \r\n  async componentDidMount(){\r\n      const {data:genres} = await getGenres()\r\n      \r\n      const {data:movies} = await getMovies()\r\n\r\n        this.setState({movies,moviesByGenre:movies,genres})\r\n\r\n    }\r\n\r\n\r\n    handleDelete =  async(e)=>{\r\n        const originalMovies = this.state.movies\r\n        const originalMoviesByGenre = this.state.moviesByGenre\r\n\r\n        const movies = this.state.movies.filter(m=>m._id !== e.target.value);\r\n        const moviesByGenre = this.state.moviesByGenre.filter(m=>m._id !== e.target.value)\r\n        this.setState({movies, moviesByGenre}) \r\n\r\n\r\n        try{\r\n             await deleteMovie(e)\r\n             }\r\n             catch(ex){\r\n                if(ex.response && ex.response.status === 404){\r\n                   toast.error('This movie has already been removed')\r\n                    this.setState({movies:originalMovies,moviesByGenre:originalMoviesByGenre})\r\n                }\r\n                if(ex.response && ex.response.status === 403){\r\n                    toast.error(ex.response.data)\r\n                     this.setState({movies:originalMovies,moviesByGenre:originalMoviesByGenre})\r\n                 }\r\n                 if(ex.response && ex.response.status === 400){\r\n                    toast.error('Please login to make changes')\r\n                     this.setState({movies:originalMovies,moviesByGenre:originalMoviesByGenre})\r\n                 }\r\n             }\r\n        /* const{data:movies} = await getMovies()\r\n        this.setState({movies,moviesByGenre:movies})\r\n      */\r\n    \r\n    }\r\n    handleLike=(movie)=>{\r\n     const movies = [...this.state.movies];\r\n     const index = movies.indexOf(movie);\r\n     movies[index].liked = !movies[index].liked;\r\n     this.setState({movies})\r\n    }\r\n    handlePageChange=(page)=>{\r\n\r\n      this.setState({currentPage:page})\r\n    }\r\n\r\n    handleGenreChange =(genre)=>{\r\n        this.setState({currentFilter:genre,currentPage:1})\r\n        if(genre === 'allGenres') return this.setState({movies:this.state.moviesByGenre})\r\n        let moviesByGenre = [...this.state.moviesByGenre]\r\n        moviesByGenre = moviesByGenre.filter(m=>m.genre.name === genre)\r\n        this.setState({\r\n            movies:moviesByGenre\r\n        })\r\n       \r\n    }   \r\n    handleSort = (sort)=>{\r\n       \r\n        this.setState({sort})\r\n\r\n    }\r\n    \r\n    handleChange = ({currentTarget:input})=>{\r\n\r\n        let search = ''\r\n        search = search += input.value\r\n        this.setState({search,currentPage:1})\r\n        \r\n\r\n    }\r\n    getPageData = () =>{\r\n        \r\n        const {pageSize,currentPage,movies:allMovies} = this.state\r\n        const reg = new RegExp(this.state.search,'i')\r\n        const movs = [...allMovies]\r\n        const searched = allMovies.filter(m=>{return m.title.match(reg)})\r\n        const sorted = _.orderBy(searched,[this.state.sort.path],[this.state.sort.order])\r\n        return  {movies:paginate(sorted,currentPage,pageSize),count:searched.length,count2:movs};\r\n    }\r\n\r\n    render(){\r\n       \r\n\r\n        const {user} = this.props\r\n        \r\n        const {movies,count,count2} = this.getPageData()\r\n       \r\n     \r\n\r\n\r\n       if(count2.length>0){ return(\r\n           \r\n\r\n               \r\n           <div className='row'>\r\n            <div className=\"col-2\">\r\n                 <Filtering onGenreChange={this.handleGenreChange} currentFilter={this.state.currentFilter}  items={this.state.genres} textProperty=\"name\" valueProperty=\"_id\"/>    \r\n            </div>\r\n            <div className='col'>\r\n                {user && <NavLink to=\"/movies/new\"><button className=\"btn btn-primary m-2\" onClick={this.handleLink}>New Movie</button></NavLink>}\r\n                <input type=\"text\" className=\"form-control m-2\" placeholder=\"Search...\" value={this.state.search} onChange={this.handleChange}/>\r\n                <p className=\"m-2\">Showing {movies.length} {movies.length >1?'movies':'movie'} out of {this.state.movies.length}</p>\r\n                 <MoviesTable  movies={movies} onDelete={this.handleDelete} onLike={this.handleLike} onSort={this.handleSort} sortColumn={this.state.sort}/>\r\n                <Pagination itemsCount={count} pageSize={this.state.pageSize} onPageChange={this.handlePageChange} currentPage={this.state.currentPage}/>\r\n            </div>\r\n            </div>\r\n            \r\n\r\n        )}\r\n        else{\r\n            return(\r\n                <div className=\"row\">\r\n                    <div className=\"col-2\">\r\n                <Filtering onGenreChange={this.handleGenreChange} currentFilter={this.state.currentFilter}  items={this.state.genres} textProperty=\"name\" valueProperty=\"_id\"/> \r\n                </div>\r\n                <div className=\"col\">\r\n                <div className=\"header\"><p>there are no {this.state.currentFilter !== 'allGenres'?this.state.currentFilter:''} movies in the database</p></div>\r\n                <NavLink to=\"/movies/new\"><button className=\"btn btn-primary\" onClick={this.handleLink}>New Movie</button></NavLink>\r\n                </div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n\r\n    }\r\n}","import React from 'react'\r\n\r\nexport default function Customers() {\r\n    return (\r\n        <div>\r\n                <h1>Customers</h1>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nexport default function Rentals() {\r\n    return (\r\n        <div>\r\n            <h1>Rentals</h1>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\n const NotFound = ()=> {\r\n    return (\r\n        <div>\r\n            <h1>404 page not found</h1>\r\n        </div>\r\n    )\r\n}\r\nexport default NotFound","\r\nimport {NavLink} from 'react-router-dom'\r\nimport React from 'react'\r\n \r\nconst NavBar = ({user})=> {\r\n    return (\r\n        <nav className=\"navbar navbar-expand-lg navbar-light bg-light \">\r\n  <NavLink className=\"navbar-brand\" to=\"\">Vidly</NavLink>\r\n  <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n    <span className=\"navbar-toggler-icon\"></span>\r\n  </button>\r\n  <div className=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n    <ul className=\"navbar-nav\">\r\n        <NavLink className=\"nav-link\" to=\"/movies\">Movies</NavLink>\r\n        <NavLink className=\"nav-link\" to=\"/customers\">Customers</NavLink>\r\n        <NavLink className=\"nav-link\" to=\"/rentals\">Rentals</NavLink>\r\n       {!user && \r\n       <React.Fragment>\r\n       <NavLink className=\"nav-link\" to=\"/login\">Login</NavLink>\r\n        <NavLink className=\"nav-link\" to='/register'>Register</NavLink>\r\n        </React.Fragment>\r\n} {user && \r\n       <React.Fragment>\r\n       <NavLink className=\"nav-link\" to=\"/profile\">{user.name}</NavLink>\r\n        <NavLink className=\"nav-link\" to='/logout'>Logout</NavLink>\r\n        </React.Fragment>\r\n}\r\n    </ul>\r\n  </div>\r\n</nav>\r\n    )\r\n}\r\n\r\n \r\nexport default NavBar;","import React from \"react\";\r\n\r\nexport default function Input({ name, label,error,...rest }) {\r\n  return (\r\n    <div className=\"m-2\">\r\n      <label htmlFor={name}>{label}</label>\r\n      <input\r\n        {...rest}\r\n        name={name}\r\n        id={name}\r\n        className=\"form-control \"\r\n      />\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n    </div>\r\n  );\r\n}\r\n","import  { Component } from 'react'\r\nimport Joi from 'joi-browser'\r\nimport Input from './input'\r\n\r\nclass Form extends Component {\r\n    state = { \r\n        data:{},\r\n        errors:{}\r\n\r\n     };\r\n\r\n     validateProperty =({name,value})=>{\r\n        const obj={[name]:value}\r\n        const schema = {[name]:this.schema[name]}\r\n        const {error} = Joi.validate(obj, schema)\r\n        return error? error.details[0].message:null\r\n      \r\n        \r\n        \r\n    }\r\n    validate = () => {\r\n        const options = {abortEarly:false}\r\n       const {error} =  Joi.validate(this.state.data, this.schema,options)\r\n      \r\n       if(!error) return null;\r\n\r\n        const errors = {};\r\n        for(let item of error.details)\r\n        errors[item.path[0]] = item.message\r\n        return errors\r\n\r\n    }\r\n\r\n    \r\n    handleSubmit = e =>{\r\n        e.preventDefault();\r\n\r\n        const errors = this.validate()\r\n        this.setState({errors:errors||{}});\r\n        if(errors) return console.log(errors);\r\n\r\n         this.doSubmit()\r\n\r\n    }\r\n\r\n\r\n    handleChange = ({currentTarget:input}) =>{\r\n        const errors = {...this.state.errors}\r\n        const errorMessage = this.validateProperty(input)\r\n        if(errorMessage) errors[input.name] = errorMessage\r\n        else delete errors[input.name]\r\n\r\n        const data = {...this.state.data}\r\n        data[input.name] = input.value\r\n        this.setState({data,errors});\r\n    }\r\n    renderButton(label){\r\n       return  <button disabled={this.validate()} className=\"btn btn-primary m-2\">{label}</button>\r\n    }\r\n\r\n    renderInput(name,label,type = 'text') {\r\n        const {data,errors} =  this.state\r\n        return <Input name={name} type={type} value={data[name]} label={label} onChange={this.handleChange} error={errors[name]}/>\r\n    }\r\n\r\n}\r\n \r\nexport default Form;","import React, { Component } from \"react\";\r\n\r\nclass Selector extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"form-group m-2\">\r\n            <label htmlFor=\"genres\">Genres</label>\r\n          <select  name=\"genres\"className=\"custom-select\" required onChange={this.props.onChange}>\r\n            <option value=\"\">Open this select menu</option>\r\n            {this.props.data.map(d=><option key={d._id} value={d.name} selected={this.props.selected === d.name?true:false}>{d.name}</option>)}\r\n            </select>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Selector;\r\n","import React from 'react'\r\n\r\nimport Form from './form'\r\nimport Selector from './Selector';\r\nimport {getGenres} from '../services/genreService'\r\nimport Joi from 'joi-browser'\r\nimport { getMovie, saveMovie ,addMovie} from './../services/movieService';\r\nimport {toast} from 'react-toastify'\r\n\r\nclass MovieForm extends Form {\r\n    state = {\r\n         data:{title:\"\",genre:\"\",numberInStock:\"\",dailyRentalRate:\"\",genres:[]},\r\n         errors:{},\r\n         selectedGenre:\"\"\r\n        }\r\n        schema = {\r\n            title: Joi.string().required().label('Title'),\r\n            numberInStock: Joi.number().required().label('Stock'),\r\n            dailyRentalRate: Joi.number().required().label('Rate'),\r\n            genres:Joi.required()\r\n        }\r\n\r\n        async componentDidMount(){\r\n            if(this.props.match.params.id !== 'new'){ \r\n\r\n                try{\r\n                    const {data:movie} = await getMovie(this.props.match.params.id)\r\n                    const {data:genres} = await getGenres()\r\n                    const {title,numberInStock,dailyRentalRate,genre} = movie\r\n                    this.setState({data:{title,numberInStock,dailyRentalRate,genres},selectedGenre:genre.name})\r\n                    console.log(movie)\r\n                }\r\n                catch(ex){\r\n                    if(ex.response && ex.response.status === 404){\r\n                        toast.error('Movie not found')\r\n                       this.props.history.push('/not-found')\r\n                    }\r\n                }\r\n             }\r\n             else{\r\n            const {data:genres} = await getGenres()\r\n             this.setState({data:{title:\"\",numberInStock:\"\",dailyRentalRate:\"\",genres:genres}})\r\n             }\r\n        }\r\n\r\n\r\n        handleGenreSet = (e)=>{\r\n          this.setState({selectedGenre:e.target.value})\r\n           \r\n        }\r\n    \r\n        doSubmit = async() => {\r\n            const _id = this.props.match.params.id;\r\n            \r\n\r\n            const {title,dailyRentalRate,genres,numberInStock} = this.state.data\r\n            const genre = genres.find(g=>g.name === this.state.selectedGenre)\r\n            const movie = {title,dailyRentalRate,genreId:genre._id,numberInStock}\r\n            if(_id === 'new'){\r\n                console.log(movie)\r\n                 await addMovie(movie)\r\n            }\r\n            else{\r\n                await saveMovie(_id,movie)\r\n            }\r\n        \r\n\r\n            this.props.history.push('/movies')\r\n           \r\n        }\r\n\r\n    render() { \r\n            const {genres} = this.state.data\r\n         \r\n            return (\r\n                <div>            \r\n                    <h1 className=\"m-2\">Movie form</h1>\r\n                    <form onSubmit={this.handleSubmit}>\r\n                    {this.renderInput('title','Title')}\r\n                    {this.renderInput('numberInStock','Stock')}\r\n                    <Selector data={genres} selected={this.state.selectedGenre} onChange={this.handleGenreSet}/>\r\n                    {this.renderInput('dailyRentalRate','Rate')}\r\n                    {this.renderButton('Save')}\r\n                </form>\r\n                \r\n            </div>\r\n             \r\n             )\r\n    }\r\n}\r\n \r\nexport default MovieForm;\r\n\r\n\r\n    \r\n    \r\n\r\n","import React from \"react\";\r\nimport Joi from \"joi-browser\";\r\nimport Form from \"./form\";\r\nimport { getCurrentUser, login } from \"../services/authService\";\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nclass LoginForm extends Form {\r\n  state = {\r\n    data: { email: \"\", password: \"\" },\r\n    errors: {},\r\n  };\r\n  schema = {\r\n    email: Joi.string().required().label(\"Username\").email(),\r\n    password: Joi.string().required().label(\"Password\"),\r\n  };\r\n  doSubmit = async () => {\r\n    try {\r\n      await login(this.state.data);\r\n      console.log(this.props.location)\r\n      const { state } = this.props.location;\r\n\r\n      window.location = state ? state.from.pathname : \"/\";\r\n    } catch (ex) {\r\n      if (ex.response && ex.response.status === 400) {\r\n        const errors = { ...this.state.errors };\r\n        errors.email = ex.response.data;\r\n        this.setState({ errors });\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    if(getCurrentUser()) return <Redirect to=\"/\"/>\r\n\r\n\r\n\r\n    return (\r\n      <div>\r\n        <h1 className=\"m-2\">Login</h1>\r\n        <form onSubmit={this.handleSubmit}>\r\n          {this.renderInput(\"email\", \"Email\", \"email\")}\r\n          {this.renderInput(\"password\", \"Password\", \"password\")}\r\n          {this.renderButton(\"Login\")}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n","import http from './httpService'\r\n\r\n\r\nconst apiEndpoint = '/users';\r\n\r\nexport function register(user){\r\n        return http.post(apiEndpoint,user)\r\n  \r\n\r\n}","import React from 'react'\r\nimport Form from './form'\r\nimport Joi from 'joi-browser'\r\nimport {register} from '../services/userService'\r\nimport { loginWithJwt } from './../services/authService';\r\nimport { Redirect } from 'react-router-dom';\r\nimport {getCurrentUser} from '../services/authService'\r\n\r\nclass RegisterForm extends Form {\r\n    state = {  \r\n        data:{email:\"\",password:\"\",name:\"\"},\r\n        errors:{}\r\n    }\r\n    schema = {\r\n        email: Joi.string().required().label('Email').email(),\r\n        password: Joi.string().required().label('Password').min(5),\r\n        name: Joi.string().required().label('Name')\r\n    }\r\n\r\n    doSubmit = async() => {\r\n\r\n    try{\r\n         const response = await register(this.state.data)\r\n         loginWithJwt(response.headers['x-auth-token'])\r\n         window.location = '/'\r\n    }\r\n    catch(ex){\r\n        if(ex.response && ex.response.status === 400){\r\n            const errors = {...this.state.errors};\r\n            errors.email = ex.response.data;\r\n            this.setState({errors});\r\n        }\r\n    }\r\n\r\n    \r\n    }\r\n\r\n    render() { \r\n        if(getCurrentUser()) return <Redirect to=\"/\"/>\r\n        return ( \r\n            <div>\r\n            <h1 className=\"m-2\">Register</h1>\r\n            <form onSubmit={this.handleSubmit}>\r\n            {this.renderInput('email','Email','email')}\r\n            {this.renderInput('password',\"Password\",\"password\")}\r\n            {this.renderInput('name',\"Name\",'text')}\r\n            {this.renderButton('Register')}\r\n            </form>\r\n            </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default RegisterForm;","import { Component } from 'react'\r\nimport {logout} from '../services/authService'\r\n\r\nclass Logout extends Component {\r\n\r\n    componentDidMount() {\r\n        logout()\r\n        window.location = '/'\r\n    }\r\n    \r\n\r\n\r\n    render() { \r\n        return null;\r\n    }\r\n}\r\n \r\nexport default Logout;","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { getCurrentUser } from \"../services/authService\";\r\n\r\nconst protectedRoute = ({ path, component: Component, render, ...rest }) => {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (!getCurrentUser()) return <Redirect to={{pathname:'/login',state:{ from:props.location}}} />;\r\n        return Component ? <Component {...props} /> : render({...props});\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default protectedRoute;\r\n","import React , {Component}from 'react';\nimport {Route,Switch,Redirect} from 'react-router-dom'\nimport { ToastContainer } from 'react-toastify';\nimport Movies from './components/Movies';\nimport Customers from './components/customers';\nimport Rentals from './components/rentals';\nimport NotFound from './components/notfound'\nimport NavBar from './components/navbar';\nimport MovieForm from './components/movieform';\nimport LoginForm from './components/loginForm';\nimport RegisterForm from './components/registerForm';\nimport Logout from './components/logout'\nimport ProtectedRoute from './components/protectedRoute';\nimport { getCurrentUser } from './services/authService';\nimport 'react-toastify/dist/ReactToastify.css'\nimport './App.css';\n\n\n\n\n\nclass App extends Component {\n  state={\n\n  }\n\n  componentDidMount() {\n    const user = getCurrentUser()\n    this.setState({user})\n\n  }\n  \n\n \nrender(){\n  return (\n    <div>\n      <ToastContainer/>\n    <NavBar user={this.state.user}/>\n    <main className=\"container\">\n      <Switch>\n      <Route path=\"/register\" component={RegisterForm}/>\n      <Route path=\"/login\" component={LoginForm}/> \n      <Route path=\"/logout\" component={Logout}/>    \n      <ProtectedRoute path=\"/movies/:id\" component={MovieForm}/>\n      <Route path=\"/movies\" render={props =><Movies {...props} user={this.state.user}/>}/>\n      <Route path=\"/customers\" component={Customers}/>\n      <Route path=\"/not-found\" component={NotFound}/>\n      <Route path=\"/rentals\" component={Rentals}/>\n      <Redirect from='/' exact to='/movies'/>\n      <Redirect  to='/not-found'/>\n      </Switch>\n    </main>\n    </div>\n  );\n }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'font-awesome/css/font-awesome.css';\nimport { BrowserRouter } from 'react-router-dom';\n\n\nReactDOM.render(\n  <BrowserRouter>\n  <App/>\n  </BrowserRouter>,\n  \n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}